{"version":3,"sources":["helpers/date-util.js","helpers/dateFormatter.js","helpers/forecast-util.js","../node_modules/jspdf/dist sync","serviceWorker.js","context/RealmContext.js","containers/SignInPage.js","components/common/SearchField.js","components/common/FilterButton.js","components/common/Avatar.js","components/common/Profile.js","components/TopPanel.js","components/projects/ProjectCard.js","components/projects/ProjectsList.js","components/common/helpers/TableIcons.js","components/common/SimpleTable.js","components/common/EditableCellTable.js","components/projects/MilestonesInfo.js","components/common/helpers/generateTablesData.js","components/projects/MilestonesInfoPaper.js","components/ProjectsContainer.js","graphql/graphql-operations.js","containers/MainPage.js","RealmApolloProvider.jsx","RealmApp.jsx","App.js","index.js"],"names":["module","exports","getThisMonth","now","current","Date","getFullYear","getMonth","setUTCHours","getNextMonth","utc","setHours","toEnUsDate","stringDate","toLocaleString","toDateOnly","date","d","month","getUTCMonth","day","getUTCDate","year","getUTCFullYear","length","join","formatDate","getCallFromThree","vals","qEndMonth","delta","res","i","convertForecastIntoRows","forecast","delivered_call","most_likely","delivered_qtd","expiring_call","expiring","expired_qtd","all_in","roq_risk","risk","roq_upside","upside","row","push","name","cq_field","cq_call","scheduled","webpackEmptyContext","req","e","Error","code","keys","resolve","id","Boolean","window","location","hostname","match","RealmContext","React","createContext","require","config","GOOGLE_CLIENT_ID","process","APP_NAME","COPYRIGHT_LINK","REALM_APP_ID","REALM_SERVICE_NAME","REALM_DATABASE_NAME","REALM_COLLECTION_NAME","GOOGLE_REDIRECT_URI","DEFAULT_PAGE_LIMIT","parseInt","DEFAULT_FILTER","region","owner","project_manager","active","active_user_filter","DEFAULT_SORT","field","order","DEFAULT_PAGINATION","increaseOn","limit","ContextContainer","props","setUser","user","setState","state","app","setFilter","profile","email","dbCollection","mongoClient","db","collection","fcstCollection","googleHandleRedirect","a","Realm","googleSignIn","credentials","google","logIn","console","error","getUserAccessToken","currentUser","refreshCustomData","accessToken","fetchFiltersDefaultValues","getFiltersDefaultValues","functions","fetchedData","regionsList","regions","sort","ownersList","owners","projectManagersList","projectManagers","setLoadProcessing","loadProcessing","setMoreProjectsLoadProcessing","moreProjectsLoadProcessing","setProjects","projects","setHasMoreProjects","hasMoreProjects","setProjectsTotalCount","getTotalProjectsCount","filter","projectsTotalCount","cleanLocalProjects","projectWithCurrentMilestone","logOut","newFilter","setSorting","newSort","setPagination","newPagination","pagination","setDefaultPagination","setProjectWithCurrentMilestone","setIsEditing","isEditing","watcher","isLoggedIn","event","clusterTime","operationType","fullDocument","lastUpdateTime","_id","map","p","watch","getActiveUserName","googleClientId","realmAppId","appName","copyrightLink","defaultPageLimit","funcs","Provider","value","this","children","Component","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","submit","signInForm","width","marginBottom","justifyContent","errorBox","SignInPage","signInError","classes","Container","component","maxWidth","CssBaseline","className","Avatar","Typography","variant","type","onClick","color","align","Box","mt","Copyright","Link","href","defaultProps","SearchField","inputPlaceHolder","onKeyDown","searchContainer","searchIcon","inputBaseRoot","inputBaseInput","InputBase","placeholder","root","input","inputProps","FilterButton","filterButtonText","filterDialogTitle","filtersObject","applyButtonText","onApplyFilters","showEmptyValue","formContainer","useState","openDialog","setOpenDialog","handleClickCloseDialog","Button","Dialog","disableBackdropClick","disableEscapeKeyDown","open","onClose","DialogTitle","DialogContent","obj","FilterOption","formControl","label","currentValue","values","setValue","DialogActions","FormControl","InputLabel","htmlFor","Select","native","onChange","Input","v","img","height","borderRadius","objectFit","textBlock","marginLeft","textAlign","overflow","textOverflow","fontSize","fontWeight","avatarImage","accountName","accountEmail","src","Profile","menuId","mobileMenuId","onProfileMenuOpen","onMobileMenuOpen","sectionDesktop","sectionMobile","pictureUrl","IconButton","edge","aria-label","aria-controls","aria-haspopup","grow","flexGrow","menuButton","marginRight","title","breakpoints","up","search","position","shape","fade","common","white","padding","pointerEvents","inputRoot","inputInput","paddingLeft","transition","transitions","create","minWidth","TopPanel","fetchProjects","useContext","useEffect","needToClean","localFilter","setLocalFilter","target","searchQuery","undefined","localSort","setLocalSorting","sortObject","handleSearchKeyDown","key","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","isMobileMenuOpen","handleProfileMenuOpen","currentTarget","handleMobileMenuClose","handleMenuClose","AppBar","Toolbar","noWrap","MobileMenu","onMobileMenuClose","ProfileMenu","onMenuClose","onLogOut","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","info","leftInfo","float","rightInfo","pos","ProjectCard","psproject","handleOnClickMilestone","milestone","getMilestoneScheduleOnwards","schedule","getMilestoneForecast","project","Card","CardContent","gutterBottom","account","details","pm_stage","pm_project_status","product_end_date","Divider","MilestonesList","milestones","onClickMilestone","List","subheader","ListSubheader","ListItem","button","ListItemText","primary","ProjectsList","fetchMoreProjects","listRoot","listSection","ul","CircularProgress","progress","disabled","size","buttonProgress","generateTableIcons","onClickEditButton","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","SimpleTable","projectId","tableName","currentColumns","currentData","onUpdate","columns","setColumns","data","setData","icons","editable","isEditable","rowData","onRowUpdate","newData","oldData","tableKey","updateKey","dataUpdate","index","tableData","onRowUpdateCancelled","EditableCellTable","options","sorting","paging","cellEditable","isCellEditable","columnDef","columnOrder","onCellEditStarted","onCellEditApproved","newValue","oldValue","Promise","reject","column","parseFloat","MilestonesInfo","milestonesTableColumns","milestonesTableRows","opportunity","currentMilestone","country","milestone_amount","summary","gap_hours","generateMilestoneTableData","scheduleTableColumns","scheduleTableRows","s","week","revenue","toFixed","hours","generateScheduleTableData","forecastTableColumns","forecastTableRows","generateForecastTableData","handleUpdateRow","query","update","updateOne","handleUpdateForecast","milestoneId","tableContainer","MilestonesInfoPaper","containerClasses","Grid","container","item","xs","Paper","background","minHeight","section","overflowAnchor","top","left","text","whiteSpace","maxHeight","ProjectsContainer","FIND_PROJECTS","gql","MainPage","queryOptions","variables","filtersInput","useLazyQuery","onCompleted","psprojectsData","psprojects","pop","onError","fetchPolicy","fetchProjectsByTrigger","timerId","setTimeout","clearTimeout","watchForUpdates","RealmApolloProvider","createApolloClient","client","setClient","graphQlUrl","ApolloClient","link","HttpLink","uri","fetch","headers","Authorization","cache","InMemoryCache","RealmApp","appRef","useRef","exact","path","render","App","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.503449f8.chunk.js","sourcesContent":["module.exports = {\n  getThisMonth,\n  getNextMonth\n};\n\nfunction getThisMonth(now) {\n  var current = new Date(now.getFullYear(), now.getMonth(), 1);\n  \n  current.setUTCHours(0,0,0,0);\n  \n  return current;\n}\n\nfunction getNextMonth(now, utc=true) {\n  var current;\n  if (now.getMonth() === 11) {\n      current = new Date(now.getFullYear() + 1, 0, 1);\n  } else {\n      current = new Date(now.getFullYear(), now.getMonth() + 1, 1);\n  }\n  \n  if (utc)\n    current.setUTCHours(0,0,0,0);\n  else\n    current.setHours(0,0,0,0);\n  \n  return current;\n}","module.exports = {\n    toEnUsDate,\n    toDateOnly\n};\n\nfunction toEnUsDate(stringDate) {\n    return new Date(stringDate).toLocaleString(\"en-US\");\n}\n\nfunction formatDate(date) {\n    var d = new Date(date),\n        month = '' + (d.getUTCMonth() + 1),\n        day = '' + d.getUTCDate(),\n        year = d.getUTCFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n\n    return [month, day, year].join('-');\n}\n\nfunction toDateOnly(stringDate) {\n    return formatDate(new Date(stringDate));\n}","module.exports = {\n    convertForecastIntoRows,\n    getCallFromThree\n};\n\n//calculate the call based on three months rolling window\nfunction getCallFromThree(vals) {\n    var today = new Date(),\n    month = today.getMonth(),\n    qEndMonth = (month < 1) ? 1 : ((month < 4) ? 4 : ((month < 7) ? 7 : ((month < 10) ? 10 : 1)));\n\n\n    //1->4: 0,1,2\n    //2->4: 0,1\n    //10->1: 0,1,2\n    //11->1: 0,1\n    //0->1:0\n    var delta = (qEndMonth > month) ? (qEndMonth - month) : (month + 12 - qEndMonth);\n    var res = 0;\n    for (let i=0; i<delta; i++)\n    \tres += vals[i];\n\n    return res;\n}\n\nfunction convertForecastIntoRows(forecast) {\n    // In\n    // {\n    //     delivered_qtd : 15000,\n    //     expired_qtd : 500,\n    //     scheduled : {\n    //         \"0\": 600,\n    //         \"1\": 1500,\n    //         \"2\":400\n    //     },\n    //     expiring : {\n    //         \"0\": 0,\n    //         \"1\": 0,\n    //         \"2\": 0\n    //     },\n    //     most_likely : {\n    //         \"0\": 600,\n    //         \"1\": 1500,\n    //         \"2\":400\n    //     },\n    //     risk : {\n    //         \"0\": 600,\n    //         \"1\":1500,\n    //         \"2\":400\n    //     },\n    //     upside : {\n    //         \"0\": 600,\n    //         \"1\":1500,\n    //         \"2\":400\n    //     }\n    // };\n    // Out\n    // [\n    //     {name: \"Delivered\", \"0\": 15000, cq_field:\"Delivered QTD\", cq_call: 15000},\n    //     {name: \"Expired\", \"0\": 500, cq_field:\"Expired QTD\", cq_call: 500},\n    //     {name: \"Scheduled\", \"0\": 600, \"1\": 1500, \"2\": 400, cq_field:\"Delivered Call\", cq_call: 18000},\n    // ];\n    var delivered_call = getCallFromThree([forecast.most_likely[\"0\"],forecast.most_likely[\"1\"],forecast.most_likely[\"2\"]]) + forecast.delivered_qtd,\n    expiring_call = getCallFromThree([forecast.expiring[\"0\"],forecast.expiring[\"1\"],forecast.expiring[\"2\"]]) + forecast.expired_qtd,\n    all_in = delivered_call + expiring_call,\n    roq_risk = getCallFromThree([forecast.risk[\"0\"], forecast.risk[\"1\"], forecast.risk[\"2\"]]),\n    roq_upside = getCallFromThree([forecast.upside[\"0\"], forecast.upside[\"1\"], forecast.upside[\"2\"]]);\n\n\n    var row = [];\n    row.push(\n        {name: \"Delivered\", \"0\": forecast.delivered_qtd, cq_field:\"Delivered QTD\", cq_call: forecast.delivered_qtd}\n        );\n    row.push(\n        {name: \"Expired\", \"0\": forecast.expired_qtd, cq_field:\"Expired QTD\", cq_call: forecast.expired_qtd}\n        );\n    row.push(\n        {name: \"Scheduled\", \"0\": forecast.scheduled[\"0\"], \"1\" : forecast.scheduled[\"1\"], \"2\" : forecast.scheduled[\"2\"], cq_field:\"Delivered Call\", cq_call: delivered_call}\n        );\n    row.push(\n        {name: \"Expiring\", \"0\": forecast.expiring[\"0\"], \"1\" : forecast.expiring[\"1\"], \"2\" : forecast.expiring[\"2\"], cq_field:\"Expired Call\", cq_call: expiring_call},\n        );\n    row.push(\n        {name: \"Most Likely $\", \"0\": forecast.most_likely[\"0\"], \"1\" : forecast.most_likely[\"1\"], \"2\" : forecast.most_likely[\"2\"], cq_field:\"All-in Call\", cq_call: all_in},\n        );\n    row.push(\n        {name: \"Risk $\", \"0\": forecast.risk[\"0\"], \"1\" : forecast.risk[\"1\"], \"2\" : forecast.risk[\"2\"], cq_field:\"ROQ Risk\", cq_call: roq_risk},\n        );\n    row.push(\n        {name: \"Upside $\", \"0\": forecast.upside[\"0\"], \"1\" : forecast.upside[\"1\"], \"2\" : forecast.upside[\"2\"], cq_field:\"ROQ Upside\", cq_call: roq_upside},\n        );\n\n    return row;\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 388;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport * as Realm from \"realm-web\";\n\nconst RealmContext = React.createContext('realm');\n\nrequire('dotenv').config();\n\nconst GOOGLE_CLIENT_ID = `${process.env.REACT_APP_GOOGLE_CLIENT_ID}` || '';\nconst APP_NAME = `${process.env.REACT_APP_NAME}` || 'Realm Test App';\nconst COPYRIGHT_LINK = `${process.env.REACT_APP_COPYRIGHT_LINK}` || 'http://localhost:3000';\nconst REALM_APP_ID = `${process.env.REACT_APP_REALM_APP_ID}` || '';\nconst REALM_SERVICE_NAME = `${process.env.REACT_APP_SERVICE_NAME}` || 'mongodb-atlas';\nconst REALM_DATABASE_NAME = `${process.env.REACT_APP_DATABASE_NAME}` || '';\nconst REALM_COLLECTION_NAME = `${process.env.REACT_APP_COLLECTION_NAME}` || '';\nconst REALM_FCST_COLLECTION_NAME = `${process.env.REACT_APP_FCST_COLLECTION_NAME}` || '';\nconst GOOGLE_REDIRECT_URI = `${process.env.REACT_APP_GOOGLE_REDIRECT_URI}` || 'http://localhost:3000/google-callback';\nconst DEFAULT_PAGE_LIMIT = parseInt(process.env.REACT_APP_PROJECTS_PAGE) || 10;\n\nconst DEFAULT_FILTER = {\n    region: '',\n    owner: '',\n    project_manager: '',\n    name: '',\n    active: true,\n    active_user_filter: '',\n}\nconst DEFAULT_SORT = {\n    field: 'name',\n    order: 'ASC'\n};\nconst DEFAULT_PAGINATION = {\n    increaseOn: DEFAULT_PAGE_LIMIT,\n    limit: DEFAULT_PAGE_LIMIT\n}\n\nexport default class ContextContainer extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...this.state,\n            googleClientId: GOOGLE_CLIENT_ID,\n            realmAppId: REALM_APP_ID,\n            appName: APP_NAME,\n            copyrightLink: COPYRIGHT_LINK,\n            app: new Realm.App(REALM_APP_ID),\n            user: null,\n            dbCollection: null,\n            fcstCollection: null,\n            filter: DEFAULT_FILTER,\n            sort: DEFAULT_SORT,\n            pagination: DEFAULT_PAGINATION,\n            defaultPageLimit: DEFAULT_PAGE_LIMIT,\n            regionsList: [],\n            ownersList: [],\n            projectManagersList: [],\n            loadProcessing: false,\n            moreProjectsLoadProcessing: false,\n            projects: null,\n            projectsTotalCount: 0,\n            hasMoreProjects: true,\n            projectWithCurrentMilestone: null,\n            isEditing: false\n        };\n        this.funcs = {\n            setUser: this.setUser,\n            googleSignIn: this.googleSignIn,\n            googleHandleRedirect: this.googleHandleRedirect,\n            getUserAccessToken: this.getUserAccessToken,\n            logOut: this.logOut,\n            fetchFiltersDefaultValues: this.fetchFiltersDefaultValues,\n            setLoadProcessing: this.setLoadProcessing,\n            setMoreProjectsLoadProcessing: this.setMoreProjectsLoadProcessing,\n            setProjects: this.setProjects,\n            setHasMoreProjects: this.setHasMoreProjects,\n            setProjectsTotalCount: this.setProjectsTotalCount,\n            cleanLocalProjects: this.cleanLocalProjects,\n            setFilter: this.setFilter,\n            setSorting: this.setSorting,\n            setPagination: this.setPagination,\n            setDefaultPagination: this.setDefaultPagination,\n            setProjectWithCurrentMilestone: this.setProjectWithCurrentMilestone,\n            setIsEditing: this.setIsEditing,\n            watcher: this.watcher,\n            getActiveUserName: this.getActiveUserName\n        };\n\n        this.lastUpdateTime = null;\n    };\n\n    setUser = (user) => {\n        this.setState({user});\n        if (this.state.app && user) {\n            this.setFilter({active_user_filter: user.profile.email});\n            const dbCollection = user\n                .mongoClient(REALM_SERVICE_NAME)\n                .db(REALM_DATABASE_NAME)\n                .collection(REALM_COLLECTION_NAME);\n            this.setState({dbCollection});\n            const fcstCollection = user\n                .mongoClient(REALM_SERVICE_NAME)\n                .db(REALM_DATABASE_NAME)\n                .collection(REALM_FCST_COLLECTION_NAME);\n            this.setState({fcstCollection});\n        }\n    };\n\n    // TODO: deprecated functionality\n    // anonymousSignIn = async () => {\n    //     const credentials = Realm.Credentials.anonymous();\n    //     try {\n    //         const user = await this.state.app.logIn(credentials);\n    //         this.setUser(user);\n    //     } catch (err) {\n    //         console.error(err);\n    //     }\n    // };\n\n    googleHandleRedirect = async () => {\n        Realm.handleAuthRedirect();\n    };\n\n    googleSignIn = async () => {\n        const credentials = Realm.Credentials.google(GOOGLE_REDIRECT_URI);\n        try {\n            const user = await this.state.app.logIn(credentials);\n            this.setUser(user);\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    // TODO: deprecated functionality\n    // onGoogleSuccessSignIn = (response) => {\n    //     const credentials = Realm.Credentials.google(response.code);\n    //     this.state.app.logIn(credentials).then(user => {\n    //         console.log(`Logged in with id: ${user.id}`);\n    //         this.setUser(user);\n    //     }).catch(err => {\n    //         console.error('onGoogleSuccessSignIn:', err);\n    //     });\n    // };\n\n    // onGoogleSignInFailure = (response) => {\n    //     console.error('onGoogleSignInFailure:', response);\n    // }\n\n    getUserAccessToken = async () => {\n        await this.state.app.currentUser.refreshCustomData();\n        return this.state.app.currentUser.accessToken;\n    };\n\n    fetchFiltersDefaultValues = async () => {\n        if (this.state.user) {\n            const {getFiltersDefaultValues} = this.state.user.functions;\n            const fetchedData = await getFiltersDefaultValues();\n            this.setState(\n                {\n                    regionsList: fetchedData.regions.sort() || [],\n                    ownersList: fetchedData.owners.sort() || [],\n                    projectManagersList: fetchedData.projectManagers.sort() || []\n                }\n            );\n        }\n    }\n\n    setLoadProcessing = loadProcessing => {\n        this.setState({loadProcessing});\n    }\n\n    setMoreProjectsLoadProcessing = moreProjectsLoadProcessing => {\n        this.setState({moreProjectsLoadProcessing});\n    }\n\n    setProjects = projects => {\n        this.setState({projects});\n    }\n\n    setHasMoreProjects = hasMoreProjects => {\n        this.setState({hasMoreProjects});\n    }\n\n    setProjectsTotalCount = async () => {\n        const {getTotalProjectsCount} = this.state.user.functions;\n        const fetchedData = await getTotalProjectsCount(this.state.filter);\n        if (fetchedData && fetchedData.length) {\n            const {name: projectsTotalCount} = fetchedData[0];\n            this.setState({projectsTotalCount});\n        }\n    }\n\n    cleanLocalProjects = async () => {\n        this.setState({\n            projects: [],\n            projectWithCurrentMilestone: null,\n            projectsTotalCount: 0\n        });\n    }\n\n    logOut = async () => {\n        await this.state.app.currentUser.logOut();\n        this.setUser(this.state.app.currentUser);\n    }\n\n    setFilter = (newFilter) => {\n        const filter = {...this.state.filter, ...newFilter};\n        this.setState({filter});\n    }\n\n    setSorting = (newSort) => {\n        this.setState({sort: newSort});\n    }\n\n    setPagination = (newPagination) => {\n        const pagination = {...this.state.pagination, ...newPagination};\n        this.setState({pagination});\n    }\n\n    setDefaultPagination = () => {\n        this.setState({pagination: DEFAULT_PAGINATION});\n    }\n\n    setProjectWithCurrentMilestone = (projectWithCurrentMilestone) => {\n        this.setState({projectWithCurrentMilestone})\n    }\n\n    setIsEditing = (isEditing) => {\n        this.setState({isEditing});\n    }\n\n    watcher = async () => {\n        if (!this.state.dbCollection) return;\n        if (!this.state.user || !this.state.app.currentUser.isLoggedIn) return;\n\n        for await (let event of this.state.dbCollection.watch()) {\n            const {clusterTime, operationType, fullDocument} = event;\n\n            if (\n                (!this.lastUpdateTime || this.lastUpdateTime < clusterTime) &&\n                fullDocument\n            ) {\n                this.lastUpdateTime = clusterTime;\n                let {projects, hasMoreProjects, pagination} = this.state;\n\n                if (operationType === 'replace' || operationType === 'update') {\n                    const {_id} = event.fullDocument;\n                    projects = projects.map(\n                        p => (p._id === _id) ? event.fullDocument : p\n                    );\n                } else if (operationType === 'insert') {\n                    if (hasMoreProjects) return;\n                    const {limit} = pagination;\n                    const isFullPage = !Boolean(projects.length % limit);\n                    isFullPage\n                        ? this.setState({hasMoreProjects: true})\n                        : projects.push(event.fullDocument);\n                }\n\n                this.setState({projects});\n            }\n        }\n    }\n\n    getActiveUserName = () => {\n        return this.state.user.profile.email;\n    }\n\n    render() {\n        return (\n            <RealmContext.Provider value={{...this.state, ...this.funcs}}>\n                {this.props.children}\n            </RealmContext.Provider>\n        )\n    }\n}\n\nexport { RealmContext };","import React from 'react';\nimport PropTypes from 'prop-types'\n\nimport Avatar from '@material-ui/core/Avatar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Link from '@material-ui/core/Link';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport GoogleButton from 'react-google-button'\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n    signInForm: {\n        width: '100%',\n        marginTop: theme.spacing(3),\n        marginBottom: theme.spacing(1),\n        display: 'flex',\n        justifyContent: 'center'\n    },\n    errorBox: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        display: 'flex',\n        justifyContent: 'center'\n    }\n}));\n\nSignInPage.propTypes = {\n    googleClientId: PropTypes.string.isRequired,\n    appName: PropTypes.string.isRequired,\n    copyrightLink: PropTypes.string.isRequired,\n    onSuccess: PropTypes.func.isRequired,\n    onFailure: PropTypes.func.isRequired,\n    signInError: PropTypes.string\n}\n\nSignInPage.defaultProps = {\n    signInError: null\n}\n\nexport default function SignInPage(props) {\n    const {\n        appName,\n        copyrightLink,\n        googleSignIn,\n        signInError\n    } = props;\n\n    const classes = useStyles();\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Sign in\n                </Typography>\n\n                <div className={classes.signInForm}>\n                    <GoogleButton\n                        type=\"light\"\n                        onClick={googleSignIn}\n                    />\n\n                    {/* TODO: disabled, not actual */}\n                    {/*<Button*/}\n                    {/*    type=\"submit\"*/}\n                    {/*    variant=\"contained\"*/}\n                    {/*    color=\"primary\"*/}\n                    {/*    className={classes.submit}*/}\n                    {/*    onClick={anonymousSignIn}*/}\n                    {/*    disabled={true}*/}\n                    {/*>*/}\n                    {/*    Anonymous user*/}\n                    {/*</Button>*/}\n\n                    {/* TODO: disabled due to not working */}\n                    {/*<div className={classes.signInForm}>*/}\n                    {/*    <GoogleLogin*/}\n                    {/*        clientId={googleClientId}*/}\n                    {/*        buttonText=\"Sign in with Google\"*/}\n                    {/*        onSuccess={onSuccess}*/}\n                    {/*        onFailure={onFailure}*/}\n                    {/*        scope={'email profile'}*/}\n                    {/*        responseType={'code'}*/}\n                    {/*        disabled={true}*/}\n                    {/*    />*/}\n                    {/*</div>*/}\n                </div>\n\n                {signInError && <div className={classes.errorBox}>\n                    <Typography variant=\"body2\" color=\"error\" align=\"center\">\n                        {signInError}\n                    </Typography>\n                </div>}\n            </div>\n            <Box mt={1}>\n                <Copyright\n                    appName={appName}\n                    copyrightLink={copyrightLink}\n                />\n            </Box>\n        </Container>\n    );\n}\n\nfunction Copyright(props) {\n    const { appName, copyrightLink } = props;\n\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright  '}\n            <Link color=\"inherit\" href={copyrightLink}>\n                {appName}\n            </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputBase from \"@material-ui/core/InputBase\";\n\nSearchField.propTypes = {\n    classes: PropTypes.object.isRequired,\n    inputPlaceHolder: PropTypes.string.isRequired,\n    onKeyDown: PropTypes.func.isRequired\n}\n\nexport default function SearchField(props) {\n    const {classes, inputPlaceHolder, onKeyDown} = props;\n    const {\n        searchContainer,\n        searchIcon,\n        inputBaseRoot,\n        inputBaseInput\n    } = classes;\n\n    return (\n        <div className={searchContainer}>\n            <div className={searchIcon}>\n                <SearchIcon />\n            </div>\n\n            <InputBase\n                placeholder={inputPlaceHolder}\n                classes={{\n                    root: inputBaseRoot,\n                    input: inputBaseInput\n                }}\n                inputProps={{'aria-label': 'search'}}\n                onKeyDown={onKeyDown}\n            />\n        </div>\n    )\n}\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\n\nimport Input from \"@material-ui/core/Input\";\n\nFilterButton.propTypes = {\n    classes: PropTypes.object.isRequired,\n    filterButtonText: PropTypes.string.isRequired,\n    filterDialogTitle: PropTypes.string.isRequired,\n    filtersObject: PropTypes.array.isRequired,\n    applyButtonText: PropTypes.string.isRequired,\n    onApplyFilters: PropTypes.func.isRequired\n}\n\nexport default function FilterButton(props) {\n    const {\n        classes,\n        filterButtonText,\n        filterDialogTitle,\n        filtersObject,\n        applyButtonText,\n        onApplyFilters,\n        showEmptyValue\n    } = props;\n\n    const {formContainer} = classes;\n\n    const [openDialog, setOpenDialog] = useState(false);\n    const handleClickOpenDialog = () => {\n        setOpenDialog(true);\n    };\n    const handleClickCloseDialog = () => {\n        setOpenDialog(false);\n    };\n    const handleClickApplyFilters = () => {\n        onApplyFilters();\n        setOpenDialog(false);\n    }\n\n    return (\n        <div className={formContainer}>\n            <Button onClick={handleClickOpenDialog} variant=\"contained\">\n                {filterButtonText}\n            </Button>\n            <Dialog\n                disableBackdropClick\n                disableEscapeKeyDown\n                open={openDialog}\n                onClose={handleClickCloseDialog}\n            >\n                <DialogTitle>{filterDialogTitle}</DialogTitle>\n\n                <DialogContent>\n                    <form className={formContainer}>\n                        {filtersObject.map(obj => <FilterOption\n                            classes={{formControl: classes.formControl}}\n                            label={obj.label}\n                            currentValue={obj.currentValue}\n                            values={obj.values}\n                            setValue={obj.setValue}\n                            showEmptyValue={showEmptyValue}\n                        />)}\n                    </form>\n                </DialogContent>\n\n                <DialogActions>\n                    <Button onClick={handleClickCloseDialog} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleClickApplyFilters} color=\"primary\">\n                        {applyButtonText}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    )\n}\n\nfunction FilterOption(props) {\n    const {\n        classes,\n        label, currentValue, values, setValue,\n        showEmptyValue\n    } = props;\n\n    const {formControl} = classes;\n\n    return (\n        <FormControl className={formControl}>\n            <InputLabel htmlFor=\"demo-dialog-native\">{label}</InputLabel>\n            <Select\n                native\n                value={currentValue}\n                onChange={setValue}\n                input={<Input id=\"demo-dialog-native\" />}\n            >\n                {showEmptyValue && <option value=''/>}\n                {values.map(v => <option value={v}>{v}</option>)}\n            </Select>\n        </FormControl>\n    )\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n\nconst useStyles = makeStyles((theme) => ({\n    img: {\n        width: '35px',\n        height: '35px',\n        borderRadius: '50%',\n        objectFit: 'cover'\n    },\n    textBlock: {\n        display: 'block',\n        marginLeft: '0.5rem',\n        textAlign: 'left',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis'\n    },\n    name: {\n        fontSize: '14px',\n        fontWeight: '600',\n    },\n    email: {\n        fontSize: '11px',\n        fontWeight: '500',\n    }\n}));\n\nAvatar.propTypes = {\n    avatarImage: PropTypes.string,\n    accountName: PropTypes.string,\n    accountEmail: PropTypes.string\n}\n\nexport default function Avatar(props) {\n    const classes = useStyles();\n\n    const {\n        avatarImage,\n        accountName,\n        accountEmail\n    } = props;\n\n    return (<>\n        {avatarImage ?\n            <img src={avatarImage} className={classes.img}/> :\n            <AccountCircle />\n        }\n        <div className={classes.textBlock}>\n            <div className={classes.name}>\n                {accountName ? accountName : 'Anonymous'}\n            </div>\n            <div className={classes.email}>\n                {accountEmail ? accountEmail : 'anonymous'}\n            </div>\n        </div>\n    </>)\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MoreIcon from '@material-ui/icons/MoreVert';\n\nimport Avatar from \"./Avatar\";\n\nProfile.propTypes = {\n    classes: PropTypes.object.isRequired,\n    profile: PropTypes.object.isRequired,\n    menuId: PropTypes.string.isRequired,\n    mobileMenuId: PropTypes.string.isRequired,\n    onProfileMenuOpen: PropTypes.func.isRequired,\n    onMobileMenuOpen: PropTypes.func.isRequired\n}\n\nexport default function Profile(props) {\n    const {\n        classes, profile,\n        menuId, mobileMenuId,\n        onProfileMenuOpen,\n        onMobileMenuOpen\n    } = props;\n\n    const {\n        sectionDesktop,\n        sectionMobile,\n    } = classes;\n\n    const {email, name, pictureUrl} = profile;\n\n    return (<>\n        <div className={sectionDesktop}>\n            <IconButton\n                edge=\"end\"\n                aria-label=\"account of current user\"\n                aria-controls={menuId}\n                aria-haspopup=\"true\"\n                onClick={onProfileMenuOpen}\n                color=\"inherit\"\n            >\n                <Avatar\n                    avatarImage={pictureUrl}\n                    accountName={name}\n                    accountEmail={email}\n                />\n            </IconButton>\n        </div>\n\n        <div className={sectionMobile}>\n            <IconButton\n                aria-label=\"show more\"\n                aria-controls={mobileMenuId}\n                aria-haspopup=\"true\"\n                onClick={onMobileMenuOpen}\n                color=\"inherit\"\n            >\n                <MoreIcon />\n            </IconButton>\n        </div>\n    </>)\n}","import React, {useContext, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nimport {RealmContext} from \"../context/RealmContext\";\nimport SearchField from \"./common/SearchField\";\nimport FilterButton from \"./common/FilterButton\";\nimport Profile from \"./common/Profile\";\nimport Avatar from \"./common/Avatar\";\n\nTopPanel.propTypes = {\n    fetchProjects: PropTypes.func.isRequired\n};\n\nconst useStyles = makeStyles((theme) => ({\n    grow: {\n        flexGrow: 1,\n    },\n    menuButton: {\n        marginRight: theme.spacing(2),\n    },\n    title: {\n        display: 'none',\n        [theme.breakpoints.up('sm')]: {\n            display: 'block',\n        },\n    },\n    search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n            backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginRight: theme.spacing(2),\n        marginLeft: 0,\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n            marginLeft: theme.spacing(3),\n            width: 'auto',\n        },\n    },\n    searchIcon: {\n        padding: theme.spacing(0, 2),\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    inputRoot: {\n        color: 'inherit',\n    },\n    inputInput: {\n        padding: theme.spacing(1, 1, 1, 0),\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n        transition: theme.transitions.create('width'),\n        width: '100%',\n        [theme.breakpoints.up('md')]: {\n            width: '20ch',\n        },\n    },\n    formContainer: {\n        marginLeft: theme.spacing(2)\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 120,\n    },\n    sectionDesktop: {\n        display: 'none',\n        [theme.breakpoints.up('md')]: {\n            display: 'flex',\n        },\n    },\n    sectionMobile: {\n        display: 'flex',\n        [theme.breakpoints.up('md')]: {\n            display: 'none',\n        },\n    },\n}));\n\nexport default function TopPanel(props) {\n    const classes = useStyles();\n\n    const {fetchProjects} = props;\n    const {\n        filter, setFilter, sort, setSorting,\n        regionsList, ownersList, projectManagersList,\n        fetchFiltersDefaultValues, setLoadProcessing,\n        getActiveUserName, user, logOut,\n        setDefaultPagination\n    } = useContext(RealmContext);\n\n    useEffect(() => {\n        fetchFiltersDefaultValues();\n    }, []);\n\n    useEffect(() => {\n        setLoadProcessing(true);\n        fetchProjects({needToClean: true});\n    }, [filter, sort]);\n\n    const {profile} = user;\n    const [localFilter, setLocalFilter] = useState(filter);\n\n    const filtersObject = [\n        {\n            label: 'Region',\n            currentValue: localFilter.region,\n            values: regionsList,\n            setValue: event => {\n                setLocalFilter({...localFilter, region: event.target.value});\n            }\n        },\n        {\n            label: 'Owner',\n            currentValue: localFilter.owner,\n            values: ownersList,\n            setValue: event => {\n                setLocalFilter({...localFilter, owner: event.target.value});\n            }\n        },\n        {\n            label: 'PM',\n            currentValue: localFilter.project_manager,\n            values: projectManagersList,\n            setValue: event => {\n                setLocalFilter({...localFilter, project_manager: event.target.value});\n            }\n        },\n        {\n            label: 'Only Active',\n            currentValue: localFilter.active ? \"Yes\" : \"No\",\n            values: [\"Yes\",\"No\"],\n            setValue: event => {\n                setLocalFilter({\n                    ...localFilter,\n                    active: (event.target.value === \"Yes\")\n                });\n            }\n        },\n        {\n            label: 'Only my projects',\n            currentValue: localFilter.active_user_filter ? \"Yes\" : \"No\",\n            values: [\"Yes\",\"No\"],\n            setValue: event => {\n                setLocalFilter({\n                    ...localFilter,\n                    active_user_filter: (event.target.value === \"Yes\")\n                        ? getActiveUserName()\n                        : ''\n                });\n            }\n        }\n    ];\n\n    const onApplyFilters = (searchQuery = undefined) => {\n        if (searchQuery !== undefined) {\n            setLocalFilter({...localFilter, name: searchQuery});\n            setFilter({...localFilter, name: searchQuery});\n        } else {\n            setFilter(localFilter);\n        }\n        setDefaultPagination();\n    }\n\n    const [localSort, setLocalSorting] = useState(sort);\n    const sortObject = [\n        {\n            label: 'Field',\n            currentValue: localSort.field,\n            values: ['name', 'region', 'owner'],\n            setValue: event => {\n                setLocalSorting({...localSort, field: event.target.value});\n            }\n        },\n        {\n            label: 'Order',\n            currentValue: localSort.order,\n            values: ['ASC', 'DESC'],\n            setValue: event => {\n                setLocalSorting({...localSort, order: event.target.value});\n            }\n        }\n    ];\n\n    const onApplySorting = () => {\n        setSorting(localSort);\n    }\n\n    const handleSearchKeyDown = async (event) => {\n        if (event.key === 'Enter') {\n            onApplyFilters(event.target.value);\n        }\n    }\n\n    const menuId = 'primary-search-account-menu';\n    const mobileMenuId = 'primary-search-account-menu-mobile';\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n    const isMenuOpen = Boolean(anchorEl);\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n    const handleProfileMenuOpen = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleMobileMenuOpen = (event) => {\n        setMobileMoreAnchorEl(event.currentTarget);\n    };\n    const handleMobileMenuClose = () => {\n        setMobileMoreAnchorEl(null);\n    };\n\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n        handleMobileMenuClose();\n    };\n    const handleLogOut = () => {\n        logOut();\n        handleMenuClose();\n    }\n\n    return (\n        <div className={classes.grow}>\n            <AppBar position=\"fixed\">\n                <Toolbar>\n                    <Typography className={classes.title} variant=\"h6\" noWrap>\n                        Projects\n                    </Typography>\n                    <SearchField\n                        classes={{\n                            searchContainer: classes.search,\n                            searchIcon: classes.searchIcon,\n                            inputBaseRoot: classes.inputRoot,\n                            inputBaseInput: classes.inputInput\n                        }}\n                        inputPlaceHolder={'Search projects'}\n                        onKeyDown={handleSearchKeyDown}\n                    />\n                    <FilterButton\n                        classes={{\n                            formContainer: classes.formContainer,\n                            formControl: classes.formControl\n                        }}\n                        filterButtonText={'Filters'}\n                        filterDialogTitle={'Filter projects'}\n                        filtersObject={filtersObject}\n                        applyButtonText={'Apply filters'}\n                        onApplyFilters={onApplyFilters}\n                        showEmptyValue={true}\n                    />\n                    <FilterButton\n                        classes={{\n                            formContainer: classes.formContainer,\n                            formControl: classes.formControl\n                        }}\n                        filterButtonText={'Sort'}\n                        filterDialogTitle={'Sort projects'}\n                        filtersObject={sortObject}\n                        applyButtonText={'Sort'}\n                        onApplyFilters={onApplySorting}\n                        showEmptyValue={false}\n                    />\n                    <div className={classes.grow} />\n\n                    <Profile\n                        classes={{\n                            sectionDesktop: classes.sectionDesktop,\n                            sectionMobile: classes.sectionMobile\n                        }}\n                        profile={profile}\n                        menuId={menuId}\n                        mobileMenuId={mobileMenuId}\n                        onProfileMenuOpen={handleProfileMenuOpen}\n                        onMobileMenuOpen={handleMobileMenuOpen}\n                    />\n                </Toolbar>\n            </AppBar>\n\n            <MobileMenu\n                mobileMoreAnchorEl={mobileMoreAnchorEl}\n                mobileMenuId={mobileMenuId}\n                isMobileMenuOpen={isMobileMenuOpen}\n                onMobileMenuClose={handleMobileMenuClose}\n                onProfileMenuOpen={handleProfileMenuOpen}\n                profile={profile}\n            />\n\n            <ProfileMenu\n                anchorEl={anchorEl}\n                menuId={menuId}\n                isMenuOpen={isMenuOpen}\n                onMenuClose={handleMenuClose}\n                onLogOut={handleLogOut}\n            />\n        </div>\n    );\n}\n\nfunction ProfileMenu(props) {\n    const {\n        anchorEl, menuId, isMenuOpen,\n        onMenuClose, onLogOut\n    } = props;\n\n    return (\n        <Menu\n            anchorEl={anchorEl}\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n            id={menuId}\n            keepMounted\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n            open={isMenuOpen}\n            onClose={onMenuClose}\n        >\n            <MenuItem onClick={onLogOut}>Log Out</MenuItem>\n        </Menu>\n    )\n}\n\nfunction MobileMenu(props) {\n    const {\n        mobileMoreAnchorEl, mobileMenuId,\n        isMobileMenuOpen, onMobileMenuClose,\n        onProfileMenuOpen, profile\n    } = props;\n\n    const {name, email, pictureUrl} = profile;\n\n    return (\n        <Menu\n            anchorEl={mobileMoreAnchorEl}\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n            id={mobileMenuId}\n            keepMounted\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n            open={isMobileMenuOpen}\n            onClose={onMobileMenuClose}\n        >\n            <MenuItem onClick={onProfileMenuOpen}>\n                <IconButton\n                    aria-label=\"account of current user\"\n                    aria-controls=\"primary-search-account-menu\"\n                    aria-haspopup=\"true\"\n                    color=\"inherit\"\n                >\n                    <Avatar\n                        avatarImage={pictureUrl}\n                        accountName={name}\n                        accountEmail={email}\n                    />\n                </IconButton>\n            </MenuItem>\n        </Menu>\n    )\n}\n","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nimport {RealmContext} from \"../../context/RealmContext\";\nimport {toDateOnly} from \"../../helpers/dateFormatter\";\n\nconst useStyles = makeStyles({\n    root: {\n        width: '55vh',\n        marginBottom: 5\n    },\n    info: {\n        display: 'inline-block',\n        width: '100%'\n    },\n    leftInfo: {\n        float: 'left'\n    },\n    rightInfo: {\n        float: 'right'\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n});\n\nProjectCard.propTypes = {\n    psproject: PropTypes.object.isRequired\n};\n\nexport default function ProjectCard(props) {\n    const classes = useStyles();\n\n    const {psproject} = props;\n    const {user, setProjectWithCurrentMilestone} = useContext(RealmContext);\n\n    const handleOnClickMilestone = async (milestone) => {\n        var schedule = await user.functions.getMilestoneScheduleOnwards(milestone._id);\n        var forecast = await user.functions.getMilestoneForecast(milestone._id);\n        setProjectWithCurrentMilestone({\n            // projectId: psproject._id,\n            // milestoneId: milestone._id\n            project: psproject,\n            milestone: {...milestone, schedule},\n            forecast: forecast\n        });\n    }\n\n    return (\n        <Card className={classes.root}>\n            <CardContent>\n                <div className={classes.info}>\n                    <div className={classes.leftInfo}>\n                        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n                            {psproject.account}\n                        </Typography>\n                    </div>\n                    <div className={classes.rightInfo}>\n                        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n                            {psproject.region}\n                        </Typography>\n                    </div>\n                </div>\n\n                <Typography variant=\"h5\" component=\"h2\">\n                    {psproject.name}\n                </Typography>\n\n                <div className={classes.info}>\n                    <div className={classes.leftInfo}>\n                        <Typography className={classes.pos} color=\"textSecondary\" gutterBottom>\n                            Owner: {psproject.owner}\n                        </Typography>\n                    </div>\n                    <div className={classes.rightInfo}>\n                        <Typography className={classes.pos} color=\"textSecondary\" gutterBottom>\n                            PM: {psproject.project_manager}\n                        </Typography>\n                    </div>\n                </div>\n\n                <Typography variant=\"body2\" component=\"p\">\n                    <b>Stage:</b> {psproject.details.pm_stage}\n                </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                    <b>Status:</b> {psproject.details.pm_project_status}\n                </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                    <b>Expires:</b> {toDateOnly(psproject.details.product_end_date)}\n                </Typography>\n                <Divider />\n\n                <MilestonesList\n                    milestones={psproject.milestones}\n                    onClickMilestone={handleOnClickMilestone}\n                />\n            </CardContent>\n        </Card>\n    );\n}\n\nfunction MilestonesList(props) {\n    const {milestones, onClickMilestone} = props;\n\n    return (\n        <List subheader={<li />}>\n            <ListSubheader>Milestones</ListSubheader>\n            {milestones && milestones.map(milestone => {\n                return (\n                    <ListItem button onClick={() => onClickMilestone(milestone)} key={milestone._id}>\n                        <ListItemText primary={milestone.name} />\n                    </ListItem>\n                )\n            })}\n        </List>\n    )\n}","import React, {useContext, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport List from \"@material-ui/core/List\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\n\nimport {RealmContext} from \"../../context/RealmContext\";\nimport ProjectCard from \"./ProjectCard\";\n\nProjectsList.propTypes = {\n    classes: PropTypes.object.isRequired,\n    fetchProjects: PropTypes.func\n}\n\nexport default function ProjectsList(props) {\n    const {classes, fetchProjects} = props;\n\n    const {\n        loadProcessing, projects,\n        projectsTotalCount,\n        defaultPageLimit,\n        pagination, setPagination,\n        hasMoreProjects,\n        moreProjectsLoadProcessing,\n        setMoreProjectsLoadProcessing\n    } = useContext(RealmContext);\n\n    const fetchMoreProjects = async () => {\n        const {increaseOn, limit} = pagination;\n        setPagination({limit: limit + increaseOn});\n    }\n\n    useEffect(() => {\n        if (pagination.limit > defaultPageLimit) {\n            setMoreProjectsLoadProcessing(true);\n            fetchProjects({needToClean: false});\n        }\n    }, [pagination]);\n\n    return (\n        <List component=\"nav\" className={classes.listRoot} aria-label=\"contacts\" subheader={<li />}>\n            <li className={classes.listSection}>\n                <ul className={classes.ul}>\n                    <ListSubheader>\n                        <Typography variant=\"h5\" color=\"primary\">\n                            Total: {projectsTotalCount || 0} Viewed: {projects ? projects.length : 0}\n                        </Typography>\n                    </ListSubheader>\n\n                    {loadProcessing && <ListItem>\n                        <CircularProgress className={classes.progress} />\n                    </ListItem>}\n\n                    {!loadProcessing && projects && projects.map(project => {\n                        return (\n                            <ListItem key={project._id}>\n                                <ProjectCard psproject={project}/>\n                            </ListItem>\n                        )\n                    })}\n\n                    {!loadProcessing && projects && <ListItem>\n                        {projects && projects.length > 0 && <Button\n                            disabled={!hasMoreProjects || moreProjectsLoadProcessing}\n                            variant=\"contained\"\n                            color=\"primary\"\n                            onClick={fetchMoreProjects}\n                        >\n                            Get more\n                        </Button>}\n                        {moreProjectsLoadProcessing && <CircularProgress size={24} className={classes.buttonProgress} />}\n                    </ListItem>}\n                </ul>\n            </li>\n        </List>\n    )\n}","import React, {forwardRef} from 'react';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\n\nexport default function generateTableIcons(props) {\n    const {onClickEditButton} = props;\n\n    return  {\n        Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n        Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n        Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n        Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n        DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n        Edit: forwardRef((props, ref) => <Edit\n            {...props} ref={ref} onClick={onClickEditButton}\n        />),\n        Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n        Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n        FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n        LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n        NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n        PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n        ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n        Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n        SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n        ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n        ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n    };\n}","import React, {useContext, useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport MaterialTable from \"material-table\";\n\nimport generateTableIcons from \"./helpers/TableIcons\";\nimport {RealmContext} from \"../../context/RealmContext\";\n\nSimpleTable.propTypes = {\n    projectId: PropTypes.string.isRequired,\n    tableName: PropTypes.string.isRequired,\n    currentColumns: PropTypes.array.isRequired,\n    currentData: PropTypes.array.isRequired,\n    onUpdate: PropTypes.func\n}\n\nexport default function SimpleTable(props) {\n    const {\n        projectId, tableName,\n        currentColumns, currentData,\n        onUpdate\n    } = props;\n\n    const {isEditing, setIsEditing} = useContext(RealmContext);\n\n    const [columns, setColumns] = useState(currentColumns);\n    const [data, setData] = useState(currentData);\n\n    useEffect(() => {\n        !isEditing && setColumns(currentColumns);\n    }, [isEditing, projectId, currentColumns]);\n\n    useEffect(() => {\n        !isEditing && setData(currentData);\n    }, [isEditing, projectId, currentData]);\n\n    const onClickEditButton = () => setIsEditing(true);\n\n    return (\n        <MaterialTable\n            title={tableName}\n            icons={generateTableIcons({onClickEditButton})}\n            columns={columns}\n            data={data}\n            editable={{\n                isEditable: rowData => rowData.editable,\n                onRowUpdate: async (newData, oldData) => {\n                    try {\n                        const {tableKey, updateKey} = newData;\n                        await onUpdate({updateKey, value: newData[tableKey]});\n                        const dataUpdate = [...data];\n                        const index = oldData.tableData.id;\n                        dataUpdate[index] = newData;\n                        setData([...dataUpdate]);\n                        setIsEditing(false);\n                    } catch (e) {\n                        console.error(e);\n                        setIsEditing(false);\n                    }\n                },\n                onRowUpdateCancelled: () => setIsEditing(false)\n            }}\n        />\n    );\n}","import React, {useContext, useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport MaterialTable from \"material-table\";\n\nimport generateTableIcons from \"./helpers/TableIcons\";\nimport {getThisMonth,getNextMonth} from \"../../helpers/date-util\";\nimport {RealmContext} from \"../../context/RealmContext\";\nimport {getCallFromThree} from \"../../helpers/forecast-util\";\n\nEditableCellTable.propTypes = {\n    projectId: PropTypes.string.isRequired,\n    milestoneId: PropTypes.string.isRequired,\n    tableName: PropTypes.string.isRequired,\n    currentColumns: PropTypes.array.isRequired,\n    currentData: PropTypes.array.isRequired,\n    onUpdate: PropTypes.func\n}\n\nexport default function EditableCellTable(props) {\n    const {\n        projectId, tableName,\n        currentColumns, currentData,\n        onUpdate\n    } = props;\n\n    const {isEditing, setIsEditing} = useContext(RealmContext);\n\n    const [columns, setColumns] = useState(currentColumns);\n    const [data, setData] = useState(currentData);\n\n    useEffect(() => {\n        !isEditing && setColumns(currentColumns);\n    }, [isEditing, projectId, currentColumns]);\n\n    useEffect(() => {\n        !isEditing && setData(currentData);\n    }, [isEditing, projectId, currentData]);\n\n    const onClickEditButton = () => setIsEditing(true);\n\n    return (\n        <MaterialTable\n            title={tableName}\n            icons={generateTableIcons({onClickEditButton})}\n            columns={columns}\n            data={data}\n            options={{\n                search:false,\n                sorting:false,\n                paging:false,\n                //padding:\"dense\"\n            }}\n            cellEditable={{\n                isCellEditable: (rowData, columnDef) => { //our hacked material table\n                    return (rowData.tableData.id > 4) && \n                            (columnDef.tableData.columnOrder >= 1) && (columnDef.tableData.columnOrder <= 3);\n                },\n                onCellEditStarted: (rowData, columnDef) => { //our hacked material table\n                    //setIsEditing(true);\n                },\n                onCellEditApproved: (newValue, oldValue, rowData, columnDef) => {\n                    // console.log(rowData)\n                    // console.log(columnDef);\n                    // console.log(getThisMonth(new Date()));\n                    // console.log(getNextMonth(getThisMonth(new Date())));\n                    // console.log(getNextMonth(getNextMonth(getThisMonth(new Date()))));\n                    var month, updateKey;\n                    switch (columnDef.tableData.columnOrder) {\n                        case 1: month = getThisMonth(new Date()); break;\n                        case 2: month = getNextMonth(new Date()); break;\n                        case 3: month = getNextMonth(getNextMonth(new Date(), false)); break;\n                        default: month = null; break;\n                    }\n\n                    switch (rowData.tableData.id) {\n                        case 5: updateKey = \"risk\"; break;\n                        case 6: updateKey = \"upside\"; break;\n                        default: updateKey = null; break;\n                    }\n                    //console.log({month, updateKey, value: parseFloat(newValue)})\n                    if (!month || !updateKey)\n                        return Promise.reject();\n\n                    const dataUpdate = [...data];\n                    const row = rowData.tableData.id;\n                    const column = columnDef.field;\n                    dataUpdate[row][column] = parseFloat(newValue);\n                    dataUpdate[row][\"cq_call\"] = getCallFromThree([dataUpdate[row][0], dataUpdate[row][1], dataUpdate[row][2]]);\n                    setData([...dataUpdate]);\n                    //console.log(data);\n\n                    var promise = onUpdate({month, updateKey, value: parseFloat(newValue)});\n\n                    //setIsEditing(false); //will generate a warning but that's ok I guess\n\n                    return promise;\n                }\n            }}\n            // editable={{\n            //     isEditable: rowData => rowData.editable,\n            //     onRowUpdate: async (newData, oldData) => {\n            //         try {\n            //             const {tableKey, updateKey} = newData;\n            //             await onUpdate({updateKey, value: newData[tableKey]});\n            //             const dataUpdate = [...data];\n            //             const index = oldData.tableData.id;\n            //             dataUpdate[index] = newData;\n            //             setData([...dataUpdate]);\n            //             setIsEditing(false);\n            //         } catch (e) {\n            //             console.error(e);\n            //             setIsEditing(false);\n            //         }\n            //     },\n            //     onRowUpdateCancelled: () => setIsEditing(false)\n            // }}\n        />\n    );\n}","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\n\nimport SimpleTable from \"../common/SimpleTable\";\nimport EditableCellTable from \"../common/EditableCellTable\";\nimport {\n    generateMilestoneTableData,\n    generateScheduleTableData,\n    generateForecastTableData\n} from \"../common/helpers/generateTablesData\";\nimport {RealmContext} from \"../../context/RealmContext\";\n\nMilestonesInfo.propTypes = {\n    classes: PropTypes.object.isRequired,\n    project: PropTypes.object.isRequired,\n};\n\nexport default function MilestonesInfo(props) {\n    const {classes, project} = props;\n    const {dbCollection, fcstCollection} = useContext(RealmContext);\n\n    const {\n        milestonesTableColumns,\n        milestonesTableRows\n    } = generateMilestoneTableData(project);\n\n    const {\n        scheduleTableColumns,\n        scheduleTableRows\n    } = generateScheduleTableData(project);\n\n    const {\n        forecastTableColumns,\n        forecastTableRows\n    } = generateForecastTableData(project);\n\n    const handleUpdateRow = async ({updateKey, value}) => {\n        const query = {_id: project._id};\n        const update = {'$set': {[updateKey]: value}};\n        const options = {'upsert': false};\n        await dbCollection.updateOne(query, update, options);\n    }\n\n    const handleUpdateForecast = async ({month, updateKey, value}) => {\n        const query = {milestoneId: project.currentMilestone._id, \"month\": month};\n        const update = {'$set': {[updateKey]: value}};\n        const options = {'upsert': true};\n        await fcstCollection.updateOne(query, update, options);\n    }\n\n    return (<>\n        {milestonesTableRows.length !== 0 && <div className={classes.tableContainer}>\n            <SimpleTable\n                projectId={project._id}\n                tableName='Project milestone info'\n                currentColumns={milestonesTableColumns}\n                currentData={milestonesTableRows}\n                onUpdate={handleUpdateRow}\n            />\n        </div>}\n        {scheduleTableRows.length !== 0 && <div className={classes.tableContainer}>\n            <SimpleTable\n                projectId={project._id}\n                tableName='Schedule'\n                currentColumns={scheduleTableColumns}\n                currentData={scheduleTableRows}\n            />\n        </div>}\n        {forecastTableRows.length !== 0 && <div className={classes.tableContainer}>\n            <EditableCellTable\n                projectId={project._id}\n                milestoneId={project.currentMilestone._id}\n                tableName='Forecast'\n                currentColumns={forecastTableColumns}\n                currentData={forecastTableRows}\n                onUpdate={handleUpdateForecast}\n            />\n        </div>}\n    </>)\n}","import {toDateOnly} from \"../../../helpers/dateFormatter\";\nimport {convertForecastIntoRows} from \"../../../helpers/forecast-util\";\n\nexport function generateMilestoneTableData(project) {\n    if (!project) return {\n        milestonesTableColumns: [],\n        milestonesTableRows: []\n    };\n\n    const {\n        owner, region,\n        project_manager,\n        account, name,\n        opportunity, details,\n        currentMilestone\n    } = project;\n\n    const milestonesTableColumns = [\n        {title: 'Project / Milestone Fields', field: 'name', editable: 'never'},\n        {title: 'Value', field: 'value', editable: 'onUpdate'}\n    ];\n    const milestonesTableRows = [\n        {name: 'Project Owner', value: owner, editable: false},\n        {name: 'Region', value: region, editable: false},\n        {name: 'Project Manager', value: project_manager, editable: false},\n        {\n            name: 'PM Stage',\n            value: details.pm_stage,\n            editable: true,\n            tableKey: 'value',\n            updateKey: 'details.pm_stage'\n        },\n        {name: 'Account', value: account, editable: false},\n        {name: 'Opportunity', value: opportunity.name, editable: false},\n        {name: 'PS Project Name', value: name, editable: false},\n        {name: 'Milestone Name', value: currentMilestone.name, editable: false},\n        {name: 'Country', value: currentMilestone.country, editable: false},\n        {name: 'Milestone amount', value: currentMilestone.details.milestone_amount, editable: false},\n        {name: 'Gap Hours', value: currentMilestone.summary.gap_hours, editable: false}\n    ]\n\n    return {milestonesTableColumns, milestonesTableRows}\n}\n\nexport function generateScheduleTableData(project) {\n    if (!project) return {\n        scheduleTableColumns: [],\n        scheduleTableRows: []\n    };\n\n    const {currentMilestone} = project;\n\n    const scheduleTableColumns = [\n        {title: 'Date', field: 'date', editable: 'never'},\n        {title: 'Scheduled', field: 'scheduled', editable: 'never'},\n        {title: 'Hours', field: 'hours', editable: 'never'}\n    ];\n    const scheduleTableRows = currentMilestone.schedule.map(s => {\n        return {\n            date: toDateOnly(s.week),\n            scheduled: s.revenue ? `$ ${s.revenue.toFixed(0)}` : '-',\n            hours: s.hours ? s.hours : '-',\n            editable: false\n        };\n    });\n\n    return {scheduleTableColumns, scheduleTableRows}\n}\n\nexport function generateForecastTableData(project) {\n    if (!project) return {\n        forecastTableColumns: [],\n        forecastTableRows: []\n    };\n\n    const {forecast} = project;\n\n    const forecastTableColumns = [\n        {title: 'N3M', field: 'name'},\n        {title: 'Month + 0', field: '0'},\n        {title: 'Month + 1', field: '1'},\n        {title: 'Month + 2', field: '2'},\n        {title: 'Current Quarter', field: 'cq_field'},\n        {title: 'Quarter Call', field: 'cq_call'},\n    ];\n\n    const forecastTableRows = convertForecastIntoRows(forecast);\n\n    // const scheduleTableRows = currentMilestone.schedule.map(s => {\n    //     return {\n    //         date: toDateOnly(s.week),\n    //         scheduled: s.revenue ? `$ ${s.revenue.toFixed(0)}` : '-',\n    //         hours: s.hours ? s.hours : '-',\n    //         editable: false\n    //     };\n    // });\n\n    return {forecastTableColumns, forecastTableRows}\n}","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport {RealmContext} from \"../../context/RealmContext\";\nimport MilestonesInfo from \"./MilestonesInfo\";\n\nconst useStyles = makeStyles({\n    tableContainer: {\n        marginTop: '20px'\n    }\n});\n\nMilestonesInfoPaper.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default function MilestonesInfoPaper(props) {\n    const containerClasses = useStyles();\n    const {classes} = props;\n    const {projectWithCurrentMilestone, projects} = useContext(RealmContext);\n\n    let project = null;\n    let currentMilestone = null;\n    let forecast = null;\n    if (projectWithCurrentMilestone) {\n        project = projectWithCurrentMilestone.project\n        currentMilestone = projectWithCurrentMilestone.milestone\n        forecast = projectWithCurrentMilestone.forecast\n    }\n\n    return (\n        <Grid container>\n            <Grid item xs={12}>\n                <Paper className={classes.paper}>\n                    <Typography variant=\"h4\" gutterBottom>\n                        Milestones overview\n                    </Typography>\n                    <Divider />\n\n                    {project && currentMilestone\n                        ? <MilestonesInfo\n                            classes={containerClasses}\n                            project={{...project, currentMilestone, forecast}}\n                        />\n                        : <div className={containerClasses.tableContainer}>\n                            <Typography variant=\"body1\">\n                                Click on project milestone to see an overview...\n                            </Typography>\n                        </div>\n                    }\n                </Paper>\n            </Grid>\n        </Grid>\n    )\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport ProjectsList from \"./projects/ProjectsList\";\nimport MilestonesInfoPaper from \"./projects/MilestonesInfoPaper\";\n\nconst useStyles = makeStyles((theme) => ({\n    container: {\n        marginTop: 70,\n        display: 'flex',\n        flexDirection: 'row'\n    },\n    root: {\n        width: '90vh',\n        backgroundColor: theme.palette.background.paper,\n        position: 'relative',\n        overflow: 'auto',\n        minHeight: '90vh',\n        height: '90vh'\n    },\n    section: {\n        backgroundColor: 'inherit',\n    },\n    ul: {\n        backgroundColor: 'inherit',\n        padding: 0,\n        overflowAnchor: 'none'\n    },\n    progress: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%'\n    },\n    buttonProgress: {\n        position: 'absolute',\n        marginLeft: '2.5rem'\n    },\n    paper: {\n        padding: theme.spacing(1),\n        textAlign: 'center',\n        color: theme.palette.text.primary,\n        whiteSpace: 'normal',\n        marginBottom: theme.spacing(1),\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(1),\n        maxHeight: '90vh',\n        overflow: 'auto'\n    },\n}));\n\nProjectsContainer.propTypes = {\n    fetchProjects: PropTypes.func\n};\n\nexport default function ProjectsContainer(props) {\n    const classes = useStyles();\n\n    const {fetchProjects} = props;\n\n    return (\n        <div className={classes.container}>\n            <ProjectsList\n                classes={{\n                    listRoot: classes.root,\n                    listSection: classes.section,\n                    ul: classes.ul,\n                    progress: classes.progress,\n                    buttonProgress: classes.buttonProgress\n                }}\n                fetchProjects={fetchProjects}\n            />\n            <MilestonesInfoPaper classes={{paper: classes.paper}}/>\n        </div>\n    )\n}","import gql from 'graphql-tag'\n\nexport const FIND_PROJECTS = gql`\n    query FindProjectsCustomResolver($filtersInput: FiltersInput!) {\n        psprojectsData(input: $filtersInput) {\n            _id\n            account\n            active\n            details {\n                pm_stage\n                pm_project_status\n                product_end_date\n            }\n            opportunity {\n                name\n                owner\n                engagement_manager\n            }\n            milestones {\n                _id\n                country\n                currency\n                name\n                summary {\n                    delivered_qtd\n                    expired_qtd\n                    from_training\n                    undelivered_hours\n                    undelivered_budget\n                    unscheduled_budget\n                    unscheduled_hours\n                }\n                base {\n                    first_scheduled_date\n                    last_scheduled_date\n                    hours_for_ns\n                    sold_hours\n                    planned_hours\n                    gap_hours\n                    scheduled_hours\n                    milestone_amount\n                    bill_rate\n                }\n                schedule {\n                    week\n                    revenue\n                    hours\n                }\n            }\n            name\n            owner\n            project_manager\n            region\n            stage\n        }\n    }\n`;","import React, {useContext} from 'react';\nimport {useLazyQuery} from \"@apollo/client\";\n\nimport {RealmContext} from \"../context/RealmContext\";\nimport TopPanel from \"../components/TopPanel\";\nimport ProjectsContainer from \"../components/ProjectsContainer\";\nimport {FIND_PROJECTS} from \"../graphql/graphql-operations\";\n\nexport default function MainPage() {\n    const {\n        setProjects, setHasMoreProjects,\n        setLoadProcessing, cleanLocalProjects,\n        filter, sort, pagination, watcher,\n        setMoreProjectsLoadProcessing,\n        setProjectsTotalCount\n    } = useContext(RealmContext);\n\n    const getSortOrder = () => {\n        const {field, order} = sort;\n        return {field, order: order === 'DESC' ? -1 : 1};\n    }\n\n    const {limit} = pagination;\n    const queryOptions = {\n        variables: {\n            filtersInput: {\n                filter: {...filter, limit },\n                sort: getSortOrder()\n            }\n        }\n    };\n\n    const isMoreProjects = projects => projects && projects.length >= limit + 1;\n\n    const [fetchProjects] = useLazyQuery(\n        FIND_PROJECTS,\n        {\n            ...queryOptions,\n            onCompleted: data => {\n                setProjectsTotalCount(filter);\n                const {psprojectsData} = data;\n                const psprojects = [...psprojectsData];\n                if (isMoreProjects(psprojects)) {\n                    psprojects.pop();\n                    setHasMoreProjects(true);\n                } else {\n                    setHasMoreProjects(false);\n                }\n                setProjects(psprojects);\n                setLoadProcessing(false);\n                setMoreProjectsLoadProcessing(false);\n            },\n            onError: error => {\n                console.error(error);\n                setHasMoreProjects(false);\n                setLoadProcessing(false);\n                setMoreProjectsLoadProcessing(false);\n            },\n            fetchPolicy: 'network-only'\n        }\n    );\n\n    const fetchProjectsByTrigger = async ({needToClean}) => {\n        needToClean && await cleanLocalProjects();\n        await fetchProjects();\n    }\n\n    let timerId = setTimeout(async function watchForUpdates() {\n        timerId && clearTimeout(timerId);\n        await watcher();\n        timerId = setTimeout(watchForUpdates, 5000);\n    }, 5000);\n\n    return (<>\n        <TopPanel fetchProjects={fetchProjectsByTrigger} />\n        <ProjectsContainer fetchProjects={fetchProjectsByTrigger} />\n    </>)\n}","import React, {useContext, useEffect, useState} from 'react';\nimport {\n    ApolloProvider,\n    ApolloClient,\n    HttpLink,\n    InMemoryCache\n} from \"@apollo/client\";\n\nimport {RealmContext} from \"./context/RealmContext\";\nimport MainPage from \"./containers/MainPage\";\n\nexport default function RealmApolloProvider() {\n    const {\n        realmAppId,\n        getUserAccessToken,\n        user\n    } = useContext(RealmContext);\n\n    const [client, setClient] = useState(createApolloClient(realmAppId, getUserAccessToken));\n    useEffect(() => {\n        setClient(\n            createApolloClient(realmAppId, getUserAccessToken)\n        );\n    }, [user]);\n\n    return (\n        <ApolloProvider client={client}>\n            <MainPage />\n        </ApolloProvider>\n    )\n}\n\nfunction createApolloClient(realmAppId, getUserAccessToken) {\n    const graphQlUrl = `https://realm.mongodb.com/api/client/v2.0/app/${realmAppId}/graphql`;\n\n    return new ApolloClient({\n        link: new HttpLink({\n            uri: graphQlUrl,\n            fetch: async (uri, options) => {\n                const accessToken = await getUserAccessToken();\n                options.headers.Authorization = `Bearer ${accessToken}`;\n                return fetch(uri, options);\n            },\n        }),\n        cache: new InMemoryCache()\n    });\n}","import React, {useContext, useRef, useEffect} from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport {RealmContext} from \"./context/RealmContext\";\nimport SignInPage from \"./containers/SignInPage\";\nimport RealmApolloProvider from \"./RealmApolloProvider\";\n\nexport default function RealmApp() {\n    const {\n        app, appName, copyrightLink,\n        googleSignIn, googleHandleRedirect,\n        user, setUser,\n    } = useContext(RealmContext);\n\n    const appRef = useRef(app);\n\n    useEffect(() => {\n        setUser(app.currentUser);\n    }, [appRef.current.currentUser]);\n\n    return (\n        <Router>\n          <Switch>\n            <Route\n                exact path=\"/google-callback\"\n                render={() => <div>\n                    Google Callback {googleHandleRedirect()}\n                </div>}\n            />\n            <Route path=\"/*\" render={() => \n                user ?  <RealmApolloProvider /> : <SignInPage\n                    appName={appName}\n                    copyrightLink={copyrightLink}\n                    googleSignIn={googleSignIn}\n                />\n                }/>\n          </Switch>\n        </Router>\n    )\n}","import React, {Component} from 'react';\n\nimport RealmContextContainer from \"./context/RealmContext\";\nimport RealmApp from \"./RealmApp\";\n\nimport './App.css';\n\nclass App extends Component {\n    render() {\n        return (\n            <div className=\"App\">\n                <RealmContextContainer>\n                    <RealmApp />\n                </RealmContextContainer>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}