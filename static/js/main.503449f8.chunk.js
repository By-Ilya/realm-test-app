(this["webpackJsonprealm-test-app"]=this["webpackJsonprealm-test-app"]||[]).push([[0],{196:function(e,t){e.exports={getThisMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1);return t.setUTCHours(0,0,0,0),t},getNextMonth:function(e){var t,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=11===e.getMonth()?new Date(e.getFullYear()+1,0,1):new Date(e.getFullYear(),e.getMonth()+1,1);a?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0);return t}}},246:function(e,t){e.exports={toEnUsDate:function(e){return new Date(e).toLocaleString("en-US")},toDateOnly:function(e){return function(e){var t=new Date(e),a=""+(t.getUTCMonth()+1),n=""+t.getUTCDate(),r=t.getUTCFullYear();a.length<2&&(a="0"+a);n.length<2&&(n="0"+n);return[a,n,r].join("-")}(new Date(e))}}},253:function(e,t){function a(e){for(var t=(new Date).getMonth(),a=t<1?1:t<4?4:t<7?7:t<10?10:1,n=a>t?a-t:t+12-a,r=0,o=0;o<n;o++)r+=e[o];return r}e.exports={convertForecastIntoRows:function(e){var t=a([e.most_likely[0],e.most_likely[1],e.most_likely[2]])+e.delivered_qtd,n=a([e.expiring[0],e.expiring[1],e.expiring[2]])+e.expired_qtd,r=t+n,o=a([e.risk[0],e.risk[1],e.risk[2]]),c=a([e.upside[0],e.upside[1],e.upside[2]]),l=[];return l.push({name:"Delivered",0:e.delivered_qtd,cq_field:"Delivered QTD",cq_call:e.delivered_qtd}),l.push({name:"Expired",0:e.expired_qtd,cq_field:"Expired QTD",cq_call:e.expired_qtd}),l.push({name:"Scheduled",0:e.scheduled[0],1:e.scheduled[1],2:e.scheduled[2],cq_field:"Delivered Call",cq_call:t}),l.push({name:"Expiring",0:e.expiring[0],1:e.expiring[1],2:e.expiring[2],cq_field:"Expired Call",cq_call:n}),l.push({name:"Most Likely $",0:e.most_likely[0],1:e.most_likely[1],2:e.most_likely[2],cq_field:"All-in Call",cq_call:r}),l.push({name:"Risk $",0:e.risk[0],1:e.risk[1],2:e.risk[2],cq_field:"ROQ Risk",cq_call:o}),l.push({name:"Upside $",0:e.upside[0],1:e.upside[1],2:e.upside[2],cq_field:"ROQ Upside",cq_call:c}),l},getCallFromThree:a}},388:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=388},440:function(e,t,a){e.exports=a(521)},445:function(e,t,a){},520:function(e,t,a){},521:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),c=a.n(o);a(445),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(35),i=a(38),s=a(112),u=a(113),m=a(16),p=a(10),f=a.n(p),d=a(20),g=a(231),b=a(262),h=r.a.createContext("realm");a(450).config();var v="".concat("557365268660-ss6m5j9pf6nlmbojiitp36avqcf1pov6.apps.googleusercontent.com")||!1,j="".concat("Realm")||!1,E="".concat("https://realm.io/")||!1,O="".concat("realm-test-app-nmyei")||!1,w="".concat("mongodb-atlas")||!1,C="".concat("shf")||!1,x="".concat("psproject")||!1,k="".concat("http://localhost:3000/google-callback")||!1,y=parseInt("50")||10,P={region:"",owner:"",project_manager:"",name:"",active:!0,active_user_filter:""},M={field:"name",order:"ASC"},_={increaseOn:y,limit:y},S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setUser=function(e){if(n.setState({user:e}),n.state.app&&e){n.setFilter({active_user_filter:e.profile.email});var t=e.mongoClient(w).db(C).collection(x);n.setState({dbCollection:t});var a=e.mongoClient(w).db(C).collection("");n.setState({fcstCollection:a})}},n.googleHandleRedirect=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.c();case 1:case"end":return e.stop()}}),e)}))),n.googleSignIn=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.b.google(k),e.prev=1,e.next=4,n.state.app.logIn(t);case 4:a=e.sent,n.setUser(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.getUserAccessToken=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.state.app.currentUser.refreshCustomData();case 2:return e.abrupt("return",n.state.app.currentUser.accessToken);case 3:case"end":return e.stop()}}),e)}))),n.fetchFiltersDefaultValues=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.user){e.next=6;break}return t=n.state.user.functions.getFiltersDefaultValues,e.next=4,t();case 4:a=e.sent,n.setState({regionsList:a.regions.sort()||[],ownersList:a.owners.sort()||[],projectManagersList:a.projectManagers.sort()||[]});case 6:case"end":return e.stop()}}),e)}))),n.setLoadProcessing=function(e){n.setState({loadProcessing:e})},n.setMoreProjectsLoadProcessing=function(e){n.setState({moreProjectsLoadProcessing:e})},n.setProjects=function(e){n.setState({projects:e})},n.setHasMoreProjects=function(e){n.setState({hasMoreProjects:e})},n.setProjectsTotalCount=Object(d.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.user.functions.getTotalProjectsCount,e.next=3,t(n.state.filter);case 3:(a=e.sent)&&a.length&&(r=a[0].name,n.setState({projectsTotalCount:r}));case 5:case"end":return e.stop()}}),e)}))),n.cleanLocalProjects=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({projects:[],projectWithCurrentMilestone:null,projectsTotalCount:0});case 1:case"end":return e.stop()}}),e)}))),n.logOut=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.state.app.currentUser.logOut();case 2:n.setUser(n.state.app.currentUser);case 3:case"end":return e.stop()}}),e)}))),n.setFilter=function(e){var t=Object(m.a)(Object(m.a)({},n.state.filter),e);n.setState({filter:t})},n.setSorting=function(e){n.setState({sort:e})},n.setPagination=function(e){var t=Object(m.a)(Object(m.a)({},n.state.pagination),e);n.setState({pagination:t})},n.setDefaultPagination=function(){n.setState({pagination:_})},n.setProjectWithCurrentMilestone=function(e){n.setState({projectWithCurrentMilestone:e})},n.setIsEditing=function(e){n.setState({isEditing:e})},n.watcher=Object(d.a)(f.a.mark((function e(){var t,a,r,o,c,l,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.dbCollection){e.next=2;break}return e.abrupt("return");case 2:if(n.state.user&&n.state.app.currentUser.isLoggedIn){e.next=4;break}return e.abrupt("return");case 4:t=!0,a=!1,e.prev=6,o=function(){var e=i,t=e.clusterTime,a=e.operationType,r=e.fullDocument;if((!n.lastUpdateTime||n.lastUpdateTime<t)&&r){n.lastUpdateTime=t;var o=n.state,c=o.projects,l=o.hasMoreProjects,s=o.pagination;if("replace"===a||"update"===a){var u=e.fullDocument._id;c=c.map((function(t){return t._id===u?e.fullDocument:t}))}else if("insert"===a){if(l)return{v:void 0};var m=s.limit;!Boolean(c.length%m)?n.setState({hasMoreProjects:!0}):c.push(e.fullDocument)}n.setState({projects:c})}},c=Object(g.a)(n.state.dbCollection.watch());case 9:return e.next=11,c.next();case 11:return l=e.sent,t=l.done,e.next=15,l.value;case 15:if(i=e.sent,t){e.next=23;break}if("object"!==typeof(s=o())){e.next=20;break}return e.abrupt("return",s.v);case 20:t=!0,e.next=9;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(6),a=!0,r=e.t0;case 29:if(e.prev=29,e.prev=30,t||null==c.return){e.next=34;break}return e.next=34,c.return();case 34:if(e.prev=34,!a){e.next=37;break}throw r;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[6,25,29,39],[30,,34,38]])}))),n.getActiveUserName=function(){return n.state.user.profile.email},n.state=Object(m.a)(Object(m.a)({},n.state),{},{googleClientId:v,realmAppId:O,appName:j,copyrightLink:E,app:new b.a(O),user:null,dbCollection:null,fcstCollection:null,filter:P,sort:M,pagination:_,defaultPageLimit:y,regionsList:[],ownersList:[],projectManagersList:[],loadProcessing:!1,moreProjectsLoadProcessing:!1,projects:null,projectsTotalCount:0,hasMoreProjects:!0,projectWithCurrentMilestone:null,isEditing:!1}),n.funcs={setUser:n.setUser,googleSignIn:n.googleSignIn,googleHandleRedirect:n.googleHandleRedirect,getUserAccessToken:n.getUserAccessToken,logOut:n.logOut,fetchFiltersDefaultValues:n.fetchFiltersDefaultValues,setLoadProcessing:n.setLoadProcessing,setMoreProjectsLoadProcessing:n.setMoreProjectsLoadProcessing,setProjects:n.setProjects,setHasMoreProjects:n.setHasMoreProjects,setProjectsTotalCount:n.setProjectsTotalCount,cleanLocalProjects:n.cleanLocalProjects,setFilter:n.setFilter,setSorting:n.setSorting,setPagination:n.setPagination,setDefaultPagination:n.setDefaultPagination,setProjectWithCurrentMilestone:n.setProjectWithCurrentMilestone,setIsEditing:n.setIsEditing,watcher:n.watcher,getActiveUserName:n.getActiveUserName},n.lastUpdateTime=null,n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(h.Provider,{value:Object(m.a)(Object(m.a)({},this.state),this.funcs)},this.props.children)}}]),a}(r.a.Component),T=a(431),N=a(42),D=a(559),I=a(541),R=a(542),L=a(289),U=a(411),F=a.n(U),B=a(104),V=a(362),A=a(540),q=a(410),H=a.n(q),W=Object(V.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{margin:e.spacing(3,0,2)},signInForm:{width:"100%",marginTop:e.spacing(3),marginBottom:e.spacing(1),display:"flex",justifyContent:"center"},errorBox:{width:"100%",marginTop:e.spacing(1),display:"flex",justifyContent:"center"}}}));function K(e){var t=e.appName,a=e.copyrightLink,n=e.googleSignIn,o=e.signInError,c=W();return r.a.createElement(A.a,{component:"main",maxWidth:"xs"},r.a.createElement(I.a,null),r.a.createElement("div",{className:c.paper},r.a.createElement(D.a,{className:c.avatar},r.a.createElement(F.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("div",{className:c.signInForm},r.a.createElement(H.a,{type:"light",onClick:n})),o&&r.a.createElement("div",{className:c.errorBox},r.a.createElement(B.a,{variant:"body2",color:"error",align:"center"},o))),r.a.createElement(L.a,{mt:1},r.a.createElement(Y,{appName:t,copyrightLink:a})))}function Y(e){var t=e.appName,a=e.copyrightLink;return r.a.createElement(B.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(R.a,{color:"inherit",href:a},t)," ",(new Date).getFullYear(),".")}K.defaultProps={signInError:null};var z=a(37),$=a(135),Q=a(78),G=a(39),J=a(15),X=a(548),Z=a(364),ee=a(299),te=a(365),ae=a(225),ne=a(241),re=a.n(ne),oe=a(434);function ce(e){var t=e.classes,a=e.inputPlaceHolder,n=e.onKeyDown,o=t.searchContainer,c=t.searchIcon,l=t.inputBaseRoot,i=t.inputBaseInput;return r.a.createElement("div",{className:o},r.a.createElement("div",{className:c},r.a.createElement(re.a,null)),r.a.createElement(oe.a,{placeholder:a,classes:{root:l,input:i},inputProps:{"aria-label":"search"},onKeyDown:n}))}var le=a(363),ie=a(543),se=a(545),ue=a(546),me=a(547),pe=a(297),fe=a(298),de=a(303),ge=a(243);function be(e){var t=e.classes,a=e.filterButtonText,o=e.filterDialogTitle,c=e.filtersObject,l=e.applyButtonText,i=e.onApplyFilters,s=e.showEmptyValue,u=t.formContainer,m=Object(n.useState)(!1),p=Object(z.a)(m,2),f=p[0],d=p[1],g=function(){d(!1)};return r.a.createElement("div",{className:u},r.a.createElement(le.a,{onClick:function(){d(!0)},variant:"contained"},a),r.a.createElement(ie.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:f,onClose:g},r.a.createElement(se.a,null,o),r.a.createElement(ue.a,null,r.a.createElement("form",{className:u},c.map((function(e){return r.a.createElement(he,{classes:{formControl:t.formControl},label:e.label,currentValue:e.currentValue,values:e.values,setValue:e.setValue,showEmptyValue:s})})))),r.a.createElement(me.a,null,r.a.createElement(le.a,{onClick:g,color:"primary"},"Cancel"),r.a.createElement(le.a,{onClick:function(){i(),d(!1)},color:"primary"},l))))}function he(e){var t=e.classes,a=e.label,n=e.currentValue,o=e.values,c=e.setValue,l=e.showEmptyValue,i=t.formControl;return r.a.createElement(pe.a,{className:i},r.a.createElement(fe.a,{htmlFor:"demo-dialog-native"},a),r.a.createElement(de.a,{native:!0,value:n,onChange:c,input:r.a.createElement(ge.a,{id:"demo-dialog-native"})},l&&r.a.createElement("option",{value:""}),o.map((function(e){return r.a.createElement("option",{value:e},e)}))))}var ve=a(414),je=a.n(ve),Ee=a(413),Oe=a.n(Ee),we=Object(V.a)((function(e){return{img:{width:"35px",height:"35px",borderRadius:"50%",objectFit:"cover"},textBlock:{display:"block",marginLeft:"0.5rem",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},name:{fontSize:"14px",fontWeight:"600"},email:{fontSize:"11px",fontWeight:"500"}}}));function Ce(e){var t=we(),a=e.avatarImage,n=e.accountName,o=e.accountEmail;return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("img",{src:a,className:t.img}):r.a.createElement(Oe.a,null),r.a.createElement("div",{className:t.textBlock},r.a.createElement("div",{className:t.name},n||"Anonymous"),r.a.createElement("div",{className:t.email},o||"anonymous")))}function xe(e){var t=e.classes,a=e.profile,n=e.menuId,o=e.mobileMenuId,c=e.onProfileMenuOpen,l=e.onMobileMenuOpen,i=t.sectionDesktop,s=t.sectionMobile,u=a.email,m=a.name,p=a.pictureUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i},r.a.createElement(ee.a,{edge:"end","aria-label":"account of current user","aria-controls":n,"aria-haspopup":"true",onClick:c,color:"inherit"},r.a.createElement(Ce,{avatarImage:p,accountName:m,accountEmail:u}))),r.a.createElement("div",{className:s},r.a.createElement(ee.a,{"aria-label":"show more","aria-controls":o,"aria-haspopup":"true",onClick:l,color:"inherit"},r.a.createElement(je.a,null))))}var ke=Object(V.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(G.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(G.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(J.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(J.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(G.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),formContainer:{marginLeft:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120},sectionDesktop:Object(G.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(G.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function ye(e){var t=ke(),a=e.fetchProjects,o=Object(n.useContext)(h),c=o.filter,l=o.setFilter,i=o.sort,s=o.setSorting,u=o.regionsList,p=o.ownersList,g=o.projectManagersList,b=o.fetchFiltersDefaultValues,v=o.setLoadProcessing,j=o.getActiveUserName,E=o.user,O=o.logOut,w=o.setDefaultPagination;Object(n.useEffect)((function(){b()}),[]),Object(n.useEffect)((function(){v(!0),a({needToClean:!0})}),[c,i]);var C=E.profile,x=Object(n.useState)(c),k=Object(z.a)(x,2),y=k[0],P=k[1],M=[{label:"Region",currentValue:y.region,values:u,setValue:function(e){P(Object(m.a)(Object(m.a)({},y),{},{region:e.target.value}))}},{label:"Owner",currentValue:y.owner,values:p,setValue:function(e){P(Object(m.a)(Object(m.a)({},y),{},{owner:e.target.value}))}},{label:"PM",currentValue:y.project_manager,values:g,setValue:function(e){P(Object(m.a)(Object(m.a)({},y),{},{project_manager:e.target.value}))}},{label:"Only Active",currentValue:y.active?"Yes":"No",values:["Yes","No"],setValue:function(e){P(Object(m.a)(Object(m.a)({},y),{},{active:"Yes"===e.target.value}))}},{label:"Only my projects",currentValue:y.active_user_filter?"Yes":"No",values:["Yes","No"],setValue:function(e){P(Object(m.a)(Object(m.a)({},y),{},{active_user_filter:"Yes"===e.target.value?j():""}))}}],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0!==e?(P(Object(m.a)(Object(m.a)({},y),{},{name:e})),l(Object(m.a)(Object(m.a)({},y),{},{name:e}))):l(y),w()},S=Object(n.useState)(i),T=Object(z.a)(S,2),N=T[0],D=T[1],I=[{label:"Field",currentValue:N.field,values:["name","region","owner"],setValue:function(e){D(Object(m.a)(Object(m.a)({},N),{},{field:e.target.value}))}},{label:"Order",currentValue:N.order,values:["ASC","DESC"],setValue:function(e){D(Object(m.a)(Object(m.a)({},N),{},{order:e.target.value}))}}],R=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===t.key&&_(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L="primary-search-account-menu",U=r.a.useState(null),F=Object(z.a)(U,2),V=F[0],A=F[1],q=r.a.useState(null),H=Object(z.a)(q,2),W=H[0],K=H[1],Y=Boolean(V),$=Boolean(W),Q=function(e){A(e.currentTarget)},G=function(){K(null)},J=function(){A(null),G()};return r.a.createElement("div",{className:t.grow},r.a.createElement(X.a,{position:"fixed"},r.a.createElement(Z.a,null,r.a.createElement(B.a,{className:t.title,variant:"h6",noWrap:!0},"Projects"),r.a.createElement(ce,{classes:{searchContainer:t.search,searchIcon:t.searchIcon,inputBaseRoot:t.inputRoot,inputBaseInput:t.inputInput},inputPlaceHolder:"Search projects",onKeyDown:R}),r.a.createElement(be,{classes:{formContainer:t.formContainer,formControl:t.formControl},filterButtonText:"Filters",filterDialogTitle:"Filter projects",filtersObject:M,applyButtonText:"Apply filters",onApplyFilters:_,showEmptyValue:!0}),r.a.createElement(be,{classes:{formContainer:t.formContainer,formControl:t.formControl},filterButtonText:"Sort",filterDialogTitle:"Sort projects",filtersObject:I,applyButtonText:"Sort",onApplyFilters:function(){s(N)},showEmptyValue:!1}),r.a.createElement("div",{className:t.grow}),r.a.createElement(xe,{classes:{sectionDesktop:t.sectionDesktop,sectionMobile:t.sectionMobile},profile:C,menuId:L,mobileMenuId:"primary-search-account-menu-mobile",onProfileMenuOpen:Q,onMobileMenuOpen:function(e){K(e.currentTarget)}}))),r.a.createElement(Me,{mobileMoreAnchorEl:W,mobileMenuId:"primary-search-account-menu-mobile",isMobileMenuOpen:$,onMobileMenuClose:G,onProfileMenuOpen:Q,profile:C}),r.a.createElement(Pe,{anchorEl:V,menuId:L,isMenuOpen:Y,onMenuClose:J,onLogOut:function(){O(),J()}}))}function Pe(e){var t=e.anchorEl,a=e.menuId,n=e.isMenuOpen,o=e.onMenuClose,c=e.onLogOut;return r.a.createElement(ae.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:a,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:o},r.a.createElement(te.a,{onClick:c},"Log Out"))}function Me(e){var t=e.mobileMoreAnchorEl,a=e.mobileMenuId,n=e.isMobileMenuOpen,o=e.onMobileMenuClose,c=e.onProfileMenuOpen,l=e.profile,i=l.name,s=l.email,u=l.pictureUrl;return r.a.createElement(ae.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:a,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:o},r.a.createElement(te.a,{onClick:c},r.a.createElement(ee.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(Ce,{avatarImage:u,accountName:i,accountEmail:s}))))}var _e=a(532),Se=a(552),Te=a(533),Ne=a(367),De=a(549),Ie=a(550),Re=a(551),Le=a(366),Ue=a(246),Fe=Object(V.a)({root:{width:"55vh",marginBottom:5},info:{display:"inline-block",width:"100%"},leftInfo:{float:"left"},rightInfo:{float:"right"},title:{fontSize:14},pos:{marginBottom:12}});function Be(e){var t=Fe(),a=e.psproject,o=Object(n.useContext)(h),c=o.user,l=o.setProjectWithCurrentMilestone,i=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.functions.getMilestoneScheduleOnwards(t._id);case 2:return n=e.sent,e.next=5,c.functions.getMilestoneForecast(t._id);case 5:r=e.sent,l({project:a,milestone:Object(m.a)(Object(m.a)({},t),{},{schedule:n}),forecast:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(De.a,{className:t.root},r.a.createElement(Ie.a,null,r.a.createElement("div",{className:t.info},r.a.createElement("div",{className:t.leftInfo},r.a.createElement(B.a,{className:t.title,color:"textSecondary",gutterBottom:!0},a.account)),r.a.createElement("div",{className:t.rightInfo},r.a.createElement(B.a,{className:t.title,color:"textSecondary",gutterBottom:!0},a.region))),r.a.createElement(B.a,{variant:"h5",component:"h2"},a.name),r.a.createElement("div",{className:t.info},r.a.createElement("div",{className:t.leftInfo},r.a.createElement(B.a,{className:t.pos,color:"textSecondary",gutterBottom:!0},"Owner: ",a.owner)),r.a.createElement("div",{className:t.rightInfo},r.a.createElement(B.a,{className:t.pos,color:"textSecondary",gutterBottom:!0},"PM: ",a.project_manager))),r.a.createElement(B.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"Stage:")," ",a.details.pm_stage),r.a.createElement(B.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"Status:")," ",a.details.pm_project_status),r.a.createElement(B.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"Expires:")," ",Object(Ue.toDateOnly)(a.details.product_end_date)),r.a.createElement(Re.a,null),r.a.createElement(Ve,{milestones:a.milestones,onClickMilestone:i})))}function Ve(e){var t=e.milestones,a=e.onClickMilestone;return r.a.createElement(_e.a,{subheader:r.a.createElement("li",null)},r.a.createElement(Se.a,null,"Milestones"),t&&t.map((function(e){return r.a.createElement(Te.a,{button:!0,onClick:function(){return a(e)},key:e._id},r.a.createElement(Le.a,{primary:e.name}))})))}function Ae(e){var t=e.classes,a=e.fetchProjects,o=Object(n.useContext)(h),c=o.loadProcessing,l=o.projects,i=o.projectsTotalCount,s=o.defaultPageLimit,u=o.pagination,m=o.setPagination,p=o.hasMoreProjects,g=o.moreProjectsLoadProcessing,b=o.setMoreProjectsLoadProcessing,v=function(){var e=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.increaseOn,a=u.limit,m({limit:a+t});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u.limit>s&&(b(!0),a({needToClean:!1}))}),[u]),r.a.createElement(_e.a,{component:"nav",className:t.listRoot,"aria-label":"contacts",subheader:r.a.createElement("li",null)},r.a.createElement("li",{className:t.listSection},r.a.createElement("ul",{className:t.ul},r.a.createElement(Se.a,null,r.a.createElement(B.a,{variant:"h5",color:"primary"},"Total: ",i||0," Viewed: ",l?l.length:0)),c&&r.a.createElement(Te.a,null,r.a.createElement(Ne.a,{className:t.progress})),!c&&l&&l.map((function(e){return r.a.createElement(Te.a,{key:e._id},r.a.createElement(Be,{psproject:e}))})),!c&&l&&r.a.createElement(Te.a,null,l&&l.length>0&&r.a.createElement(le.a,{disabled:!p||g,variant:"contained",color:"primary",onClick:v},"Get more"),g&&r.a.createElement(Ne.a,{size:24,className:t.buttonProgress})))))}var qe=a(557),He=a(156),We=a(186),Ke=a.n(We),Ye=a(417),ze=a.n(Ye),$e=a(426),Qe=a.n($e),Ge=a(418),Je=a.n(Ge),Xe=a(425),Ze=a.n(Xe),et=a(306),tt=a.n(et),at=a(305),nt=a.n(at),rt=a(419),ot=a.n(rt),ct=a(420),lt=a.n(ct),it=a(422),st=a.n(it),ut=a(423),mt=a.n(ut),pt=a(424),ft=a.n(pt),dt=a(427),gt=a.n(dt),bt=a(421),ht=a.n(bt),vt=a(428),jt=a.n(vt);function Et(e){var t=e.onClickEditButton;return{Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(ze.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(tt.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,a){return r.a.createElement(lt.a,Object.assign({},e,{ref:a,onClick:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(ht.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(mt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(tt.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ze.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(re.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(Qe.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(jt.a,Object.assign({},e,{ref:t}))}))}}function Ot(e){var t=e.projectId,a=e.tableName,o=e.currentColumns,c=e.currentData,l=e.onUpdate,i=Object(n.useContext)(h),s=i.isEditing,u=i.setIsEditing,m=Object(n.useState)(o),p=Object(z.a)(m,2),g=p[0],b=p[1],v=Object(n.useState)(c),j=Object(z.a)(v,2),E=j[0],O=j[1];Object(n.useEffect)((function(){!s&&b(o)}),[s,t,o]),Object(n.useEffect)((function(){!s&&O(c)}),[s,t,c]);return r.a.createElement(Ke.a,{title:a,icons:Et({onClickEditButton:function(){return u(!0)}}),columns:g,data:E,editable:{isEditable:function(e){return e.editable},onRowUpdate:function(){var e=Object(d.a)(f.a.mark((function e(t,a){var n,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.tableKey,r=t.updateKey,e.next=4,l({updateKey:r,value:t[n]});case 4:o=Object(Q.a)(E),c=a.tableData.id,o[c]=t,O(Object(Q.a)(o)),u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),u(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),onRowUpdateCancelled:function(){return u(!1)}}})}var wt=a(196),Ct=a(253);function xt(e){var t=e.projectId,a=e.tableName,o=e.currentColumns,c=e.currentData,l=e.onUpdate,i=Object(n.useContext)(h),s=i.isEditing,u=i.setIsEditing,m=Object(n.useState)(o),p=Object(z.a)(m,2),f=p[0],d=p[1],g=Object(n.useState)(c),b=Object(z.a)(g,2),v=b[0],j=b[1];Object(n.useEffect)((function(){!s&&d(o)}),[s,t,o]),Object(n.useEffect)((function(){!s&&j(c)}),[s,t,c]);return r.a.createElement(Ke.a,{title:a,icons:Et({onClickEditButton:function(){return u(!0)}}),columns:f,data:v,options:{search:!1,sorting:!1,paging:!1},cellEditable:{isCellEditable:function(e,t){return e.tableData.id>4&&t.tableData.columnOrder>=1&&t.tableData.columnOrder<=3},onCellEditStarted:function(e,t){},onCellEditApproved:function(e,t,a,n){var r,o;switch(n.tableData.columnOrder){case 1:r=Object(wt.getThisMonth)(new Date);break;case 2:r=Object(wt.getNextMonth)(new Date);break;case 3:r=Object(wt.getNextMonth)(Object(wt.getNextMonth)(new Date,!1));break;default:r=null}switch(a.tableData.id){case 5:o="risk";break;case 6:o="upside";break;default:o=null}if(!r||!o)return Promise.reject();var c=Object(Q.a)(v),i=a.tableData.id,s=n.field;return c[i][s]=parseFloat(e),c[i].cq_call=Object(Ct.getCallFromThree)([c[i][0],c[i][1],c[i][2]]),j(Object(Q.a)(c)),l({month:r,updateKey:o,value:parseFloat(e)})}}})}function kt(e){var t=e.classes,a=e.project,o=Object(n.useContext)(h),c=o.dbCollection,l=o.fcstCollection,i=function(e){if(!e)return{milestonesTableColumns:[],milestonesTableRows:[]};var t=e.owner,a=e.region,n=e.project_manager,r=e.account,o=e.name,c=e.opportunity,l=e.details,i=e.currentMilestone;return{milestonesTableColumns:[{title:"Project / Milestone Fields",field:"name",editable:"never"},{title:"Value",field:"value",editable:"onUpdate"}],milestonesTableRows:[{name:"Project Owner",value:t,editable:!1},{name:"Region",value:a,editable:!1},{name:"Project Manager",value:n,editable:!1},{name:"PM Stage",value:l.pm_stage,editable:!0,tableKey:"value",updateKey:"details.pm_stage"},{name:"Account",value:r,editable:!1},{name:"Opportunity",value:c.name,editable:!1},{name:"PS Project Name",value:o,editable:!1},{name:"Milestone Name",value:i.name,editable:!1},{name:"Country",value:i.country,editable:!1},{name:"Milestone amount",value:i.details.milestone_amount,editable:!1},{name:"Gap Hours",value:i.summary.gap_hours,editable:!1}]}}(a),s=i.milestonesTableColumns,u=i.milestonesTableRows,m=function(e){return e?{scheduleTableColumns:[{title:"Date",field:"date",editable:"never"},{title:"Scheduled",field:"scheduled",editable:"never"},{title:"Hours",field:"hours",editable:"never"}],scheduleTableRows:e.currentMilestone.schedule.map((function(e){return{date:Object(Ue.toDateOnly)(e.week),scheduled:e.revenue?"$ ".concat(e.revenue.toFixed(0)):"-",hours:e.hours?e.hours:"-",editable:!1}}))}:{scheduleTableColumns:[],scheduleTableRows:[]}}(a),p=m.scheduleTableColumns,g=m.scheduleTableRows,b=function(e){if(!e)return{forecastTableColumns:[],forecastTableRows:[]};var t=e.forecast;return{forecastTableColumns:[{title:"N3M",field:"name"},{title:"Month + 0",field:"0"},{title:"Month + 1",field:"1"},{title:"Month + 2",field:"2"},{title:"Current Quarter",field:"cq_field"},{title:"Quarter Call",field:"cq_call"}],forecastTableRows:Object(Ct.convertForecastIntoRows)(t)}}(a),v=b.forecastTableColumns,j=b.forecastTableRows,E=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,o,l,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.updateKey,r=t.value,o={_id:a._id},l={$set:Object(G.a)({},n,r)},i={upsert:!1},e.next=6,c.updateOne(o,l,i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,o,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.month,r=t.updateKey,o=t.value,c={milestoneId:a.currentMilestone._id,month:n},i={$set:Object(G.a)({},r,o)},s={upsert:!0},e.next=6,l.updateOne(c,i,s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,0!==u.length&&r.a.createElement("div",{className:t.tableContainer},r.a.createElement(Ot,{projectId:a._id,tableName:"Project milestone info",currentColumns:s,currentData:u,onUpdate:E})),0!==g.length&&r.a.createElement("div",{className:t.tableContainer},r.a.createElement(Ot,{projectId:a._id,tableName:"Schedule",currentColumns:p,currentData:g})),0!==j.length&&r.a.createElement("div",{className:t.tableContainer},r.a.createElement(xt,{projectId:a._id,milestoneId:a.currentMilestone._id,tableName:"Forecast",currentColumns:v,currentData:j,onUpdate:O})))}var yt=Object(V.a)({tableContainer:{marginTop:"20px"}});function Pt(e){var t=yt(),a=e.classes,o=Object(n.useContext)(h),c=o.projectWithCurrentMilestone,l=(o.projects,null),i=null,s=null;return c&&(l=c.project,i=c.milestone,s=c.forecast),r.a.createElement(qe.a,{container:!0},r.a.createElement(qe.a,{item:!0,xs:12},r.a.createElement(He.a,{className:a.paper},r.a.createElement(B.a,{variant:"h4",gutterBottom:!0},"Milestones overview"),r.a.createElement(Re.a,null),l&&i?r.a.createElement(kt,{classes:t,project:Object(m.a)(Object(m.a)({},l),{},{currentMilestone:i,forecast:s})}):r.a.createElement("div",{className:t.tableContainer},r.a.createElement(B.a,{variant:"body1"},"Click on project milestone to see an overview...")))))}var Mt=Object(V.a)((function(e){return{container:{marginTop:70,display:"flex",flexDirection:"row"},root:{width:"90vh",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",minHeight:"90vh",height:"90vh"},section:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,overflowAnchor:"none"},progress:{position:"absolute",top:"50%",left:"50%"},buttonProgress:{position:"absolute",marginLeft:"2.5rem"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.primary,whiteSpace:"normal",marginBottom:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(1),maxHeight:"90vh",overflow:"auto"}}}));function _t(e){var t=Mt(),a=e.fetchProjects;return r.a.createElement("div",{className:t.container},r.a.createElement(Ae,{classes:{listRoot:t.root,listSection:t.section,ul:t.ul,progress:t.progress,buttonProgress:t.buttonProgress},fetchProjects:a}),r.a.createElement(Pt,{classes:{paper:t.paper}}))}var St=a(429),Tt=a(125);function Nt(){var e=Object(St.a)(["\n    query FindProjectsCustomResolver($filtersInput: FiltersInput!) {\n        psprojectsData(input: $filtersInput) {\n            _id\n            account\n            active\n            details {\n                pm_stage\n                pm_project_status\n                product_end_date\n            }\n            opportunity {\n                name\n                owner\n                engagement_manager\n            }\n            milestones {\n                _id\n                country\n                currency\n                name\n                summary {\n                    delivered_qtd\n                    expired_qtd\n                    from_training\n                    undelivered_hours\n                    undelivered_budget\n                    unscheduled_budget\n                    unscheduled_hours\n                }\n                base {\n                    first_scheduled_date\n                    last_scheduled_date\n                    hours_for_ns\n                    sold_hours\n                    planned_hours\n                    gap_hours\n                    scheduled_hours\n                    milestone_amount\n                    bill_rate\n                }\n                schedule {\n                    week\n                    revenue\n                    hours\n                }\n            }\n            name\n            owner\n            project_manager\n            region\n            stage\n        }\n    }\n"]);return Nt=function(){return e},e}var Dt=a.n(Tt)()(Nt());function It(){var e=Object(n.useContext)(h),t=e.setProjects,a=e.setHasMoreProjects,o=e.setLoadProcessing,c=e.cleanLocalProjects,l=e.filter,i=e.sort,s=e.pagination,u=e.watcher,p=e.setMoreProjectsLoadProcessing,g=e.setProjectsTotalCount,b=s.limit,v={variables:{filtersInput:{filter:Object(m.a)(Object(m.a)({},l),{},{limit:b}),sort:{field:i.field,order:"DESC"===i.order?-1:1}}}},j=Object($.useLazyQuery)(Dt,Object(m.a)(Object(m.a)({},v),{},{onCompleted:function(e){g(l);var n,r=e.psprojectsData,c=Object(Q.a)(r);(n=c)&&n.length>=b+1?(c.pop(),a(!0)):a(!1),t(c),o(!1),p(!1)},onError:function(e){console.error(e),a(!1),o(!1),p(!1)},fetchPolicy:"network-only"})),E=Object(z.a)(j,1)[0],O=function(){var e=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.needToClean,e.t0=a,!e.t0){e.next=5;break}return e.next=5,c();case 5:return e.next=7,E();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=setTimeout(function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w&&clearTimeout(w),e.next=3,u();case 3:w=setTimeout(t,5e3);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),5e3);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{fetchProjects:O}),r.a.createElement(_t,{fetchProjects:O}))}function Rt(){var e=Object(n.useContext)(h),t=e.realmAppId,a=e.getUserAccessToken,o=e.user,c=Object(n.useState)(Lt(t,a)),l=Object(z.a)(c,2),i=l[0],s=l[1];return Object(n.useEffect)((function(){s(Lt(t,a))}),[o]),r.a.createElement($.ApolloProvider,{client:i},r.a.createElement(It,null))}function Lt(e,t){var a="https://realm.mongodb.com/api/client/v2.0/app/".concat(e,"/graphql");return new $.ApolloClient({link:new $.HttpLink({uri:a,fetch:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(d.a)(f.a.mark((function e(a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,n.headers.Authorization="Bearer ".concat(r),e.abrupt("return",fetch(a,n));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),cache:new $.InMemoryCache})}function Ut(){var e=Object(n.useContext)(h),t=e.app,a=e.appName,o=e.copyrightLink,c=e.googleSignIn,l=e.googleHandleRedirect,i=e.user,s=e.setUser,u=Object(n.useRef)(t);return Object(n.useEffect)((function(){s(t.currentUser)}),[u.current.currentUser]),r.a.createElement(T.a,null,r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:"/google-callback",render:function(){return r.a.createElement("div",null,"Google Callback ",l())}}),r.a.createElement(N.a,{path:"/*",render:function(){return i?r.a.createElement(Rt,null):r.a.createElement(K,{appName:a,copyrightLink:o,googleSignIn:c})}})))}a(520);var Ft=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null,r.a.createElement(Ut,null)))}}]),a}(n.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[440,1,2]]]);
//# sourceMappingURL=main.503449f8.chunk.js.map